(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],Array(39).concat([function(e,t,c){},function(e,t,c){},function(e,t,c){},,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),r=c(26),i=c.n(r),a=(c(39),c(3)),o=c(27),l=c(28),d=c(14),j=c(34),u=c(33),b=(c(40),{apiURL:"https://food-delivery-stanchev-backend.herokuapp.com/",regions:{smolyan:.5,raykovo:1.5,ustovo:1.5,kaptaja:1.5},mapBgRegions:{smolyan:"\u0421\u043c\u043e\u043b\u044f\u043d",raykovo:"\u0420\u0430\u0439\u043a\u043e\u0432\u043e",ustovo:"\u0423\u0441\u0442\u043e\u0432\u043e",kaptaja:"\u041a\u0430\u043f\u0442\u0430\u0436\u0430"}});function h(e,t,c){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},credentials:"include",body:c?JSON.stringify(c):void 0})}var O=b.apiURL,m={login:function(e,t){return fetch(O+"user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},register:function(e){return h(O+"user/register","POST",e).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},editUserData:function(e){return h(O+"user/profile","PUT",e).then((function(e){return e.json()})).catch(console.error)},getUserInfo:function(){return h(O+"user/profile","GET").then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},logout:function(){return h(O+"user/logout","POST").then((function(e){return e.json()})).catch(console.error)}},x=b.apiURL,f={products:[],totalPrice:0};function p(e,t){return e.length===t.length&&e.every((function(e,c){return function(e,t){var c=this;return"object"===typeof e&&Object.keys(e).length>0?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(s){return c.objectsEqual(e[s],t[s])})):e===t}(e,t[c])}))}function v(e){return e.totalPrice=0,e.products.forEach((function(t){e.totalPrice+=t.quantity*t.price})),e.totalPrice}var g={getDailyMenu:function(){return h(x+"dishes/").then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},addToCart:function(e,t,c){var s,n=e.cart,r=null===(s=n.products)||void 0===s?void 0:s.find((function(e){return e.name===t.name&&e.price===t.price&&p(e.selected_options,t.selected_options)}));return r?c?0===r.quantity&&r.quantity++:r.quantity+=1:(t.quantity=1,n.products=n.products?n.products.concat(t):[t]),n.totalPrice=v(n),m.editUserData({cart:n,userId:e._id})},removeItemFromCart:function(e,t){var c,s,n,r,i=null===(c=e.cart)||void 0===c||null===(s=c.products)||void 0===s?void 0:s.findIndex((function(e){return e.name===t.name&&e.price===t.price&&p(e.selected_options,t.selected_options)}));null===(n=e.cart)||void 0===n||null===(r=n.products)||void 0===r||r.splice(i,1),e.cart.totalPrice=v(e.cart);var a={cart:e.cart,userId:e._id};return m.editUserData(a)},clearCart:function(e){return m.editUserData({cart:f,userId:e})}},N=(c(41),c(4)),y=c(16),k=c(8),U=c(1);var C=function(e){var t=e.user;return Object(U.jsxs)("article",{className:"container-header",children:[Object(U.jsx)("article",{className:"container-left",children:Object(U.jsx)(N.b,{to:"/",children:Object(U.jsx)("img",{src:"foodDelivery-icon.png",alt:"site-logo",className:"logo"})})}),Object(U.jsx)("article",{className:"container-middle",children:Object(U.jsx)("nav",{className:"nav-bar",children:Object(U.jsxs)("ul",{children:[Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/",exact:!0,activeClassName:"is-active",children:"\u041e\u0431\u0435\u0434\u043d\u043e \u043c\u0435\u043d\u044e"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/about",exact:!0,activeClassName:"is-active",children:"\u0417\u0430 \u043d\u0430\u0441"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/conditions",exact:!0,activeClassName:"is-active",children:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/posts",exact:!0,activeClassName:"is-active",children:"\u041c\u043d\u0435\u043d\u0438\u044f"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/contacts",exact:!0,activeClassName:"is-active",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]})})}),Object(U.jsx)("article",{className:"container-right",children:Object(U.jsx)("article",{className:"user-bar",children:(null===t||void 0===t?void 0:t.username)?Object(U.jsxs)("ul",{children:[Object(U.jsx)("li",{children:Object(U.jsxs)(N.c,{to:"/profile",className:"user-bar-username-wrapper",children:[Object(U.jsx)("p",{className:"user-bar-username",children:null===t||void 0===t?void 0:t.username}),Object(U.jsx)(y.b,{})]})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/cart",children:Object(U.jsx)(y.a,{})})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/logout",children:Object(U.jsx)(k.d,{})})})]}):Object(U.jsxs)("ul",{children:[Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/login",exact:!0,activeClassName:"is-active",children:"\u0412\u0445\u043e\u0434"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.c,{to:"/register",exact:!0,activeClassName:"is-active",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})})]})};c(51);var w=function(e){return Object(U.jsxs)("section",{className:"footer",children:[Object(U.jsx)("nav",{className:"footer-nav-bar",children:Object(U.jsxs)("ul",{children:[Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/",children:"\u041c\u0435\u043d\u044e"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/about",children:"\u0417\u0430 \u043d\u0430\u0441"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/conditions",children:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/posts",children:"\u041c\u043d\u0435\u043d\u0438\u044f"})}),Object(U.jsx)("li",{children:Object(U.jsx)(N.b,{to:"/contacts",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]})}),Object(U.jsxs)("article",{className:"footer-icons",children:[Object(U.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_visa.png"}),Object(U.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_master.png"}),Object(U.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_paypal.png"})]}),Object(U.jsx)("h5",{children:"Food Delivery \xa9 2021"})]})};c(52),c(53);var F=function(e){var t=e.dish,c=e.addToCart,s=e.isLogged;return Object(U.jsxs)("article",{className:"dish",children:[Object(U.jsx)("img",{src:t.img,alt:"dish img"}),Object(U.jsxs)("article",{className:"dish-content",children:[Object(U.jsx)("h3",{children:t.name}),Object(U.jsx)("ul",{className:"products",children:Object(U.jsxs)("p",{children:["\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438: ",t.products.join(", ")]})}),Object(U.jsxs)("p",{children:[t.weight," \u0433\u0440."]})]}),Object(U.jsxs)("article",{className:"dish-buy",children:[Object(U.jsx)("article",{className:"dish-buy-options"}),Object(U.jsxs)("article",{className:"dish-buy-order",children:[Object(U.jsxs)("h3",{className:"price",children:[t.price.toFixed(2)," \u043b\u0432."]}),s?Object(U.jsx)("button",{className:"price-btn",onClick:c.bind(null,t),children:"\u0414\u043e\u0431\u0430\u0432\u0438"}):null]})]})]})},_=(c(54),c(18)),P=(c(55),c(9));var S=function(e){var t=e.item,c=e.onChangeItemQuantity,s=e.onRemoveItem;return Object(U.jsx)(U.Fragment,{children:t?Object(U.jsxs)("article",{className:"cart-item",children:[Object(U.jsx)("h5",{className:"cart-item-title",children:t.name}),Object(U.jsxs)("article",{className:"cart-item-quantity",children:[Object(U.jsxs)("article",{className:"cart-item-quantity-icons",children:[Object(U.jsx)(P.b,{className:"item-quantity-up",onClick:c.bind(null,t,"add")}),Object(U.jsx)(P.a,{className:"item-quantity-down",onClick:c.bind(null,t,"subtract")})]}),Object(U.jsxs)("p",{children:[" ",Object(U.jsx)("strong",{children:t.quantity})," * ",Object(U.jsx)("i",{children:Number(t.price).toFixed(2)})," \u043b\u0432. ="]}),Object(U.jsxs)("p",{className:"item-total-price",children:[Number(t.quantity*t.price).toFixed(2)," \u043b\u0432."]}),Object(U.jsx)(P.c,{className:"cart-item-remove-icon",label:"Remove dish",onClick:s.bind(null,t)})]})]}):Object(U.jsx)("p",{children:"Loading..."})})};var D=function(e){var t,c,s,n,r=e.user,i=e.setUser,a=e.match,o=function(e,t){"add"===t?e.quantity++:e.quantity--,g.addToCart(r,e,t).then((function(e){return i(e)})).catch(console.error)},l=function(e){g.removeItemFromCart(r,e).then((function(e){return i(e)})).catch(console.error)};return Object(U.jsxs)("section",{className:"cart",children:[Object(U.jsxs)("article",{className:"cart-icon-wrapper",children:[Object(U.jsx)(k.e,{className:"cart-icon"}),Object(U.jsx)(_.b,{className:"cart-trash-icon",onClick:function(){g.clearCart(r._id).then((function(e){return i(e)})).catch(console.error)}})]}),(null===r||void 0===r||null===(t=r.cart)||void 0===t||null===(c=t.products)||void 0===c?void 0:c.length)>0?Object(U.jsxs)("article",{className:"cart-dishes",children:[Object(U.jsx)("ul",{children:null===r||void 0===r||null===(s=r.cart)||void 0===s?void 0:s.products.map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(S,{item:e,onChangeItemQuantity:o,onRemoveItem:l})},null===e||void 0===e?void 0:e.name)}))}),Object(U.jsxs)("article",{className:"cart-summary",children:[Object(U.jsx)("p",{className:"cart-summary-text",children:"\u041e\u0431\u0449\u043e"}),Object(U.jsxs)("article",{className:"cart-summary-ctrl",children:[Object(U.jsxs)("p",{className:"cart-total-price",children:[Number(null===r||void 0===r||null===(n=r.cart)||void 0===n?void 0:n.totalPrice).toFixed(2)," \u043b\u0432."]}),a.path.includes("order")?null:Object(U.jsx)(N.b,{to:"order",children:Object(U.jsx)("button",{className:"cart-summary-btn",children:"\u041f\u043e\u0440\u044a\u0447\u0430\u0439"})})]})]})]}):Object(U.jsx)("p",{children:"\u041d\u044f\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438..."})]})},q=c(30),I=(c(56),function(e){var t=e.setUser,c=e.history,n=e.setNotification;Object(q.a)(e,["setUser","history","setNotification"]);Object(s.useEffect)((function(){return function(){return n({})}}),[]);return Object(U.jsxs)("section",{className:"login",children:[Object(U.jsx)(k.c,{className:"login-icon"}),Object(U.jsx)("article",{className:"login-form",children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=e.target.username.value,r=e.target.password.value;m.login(s,r).then((function(e){if(e.message){var s={message:e.message,type:"error"};n(s)}else n({}),t(e),c.push("/")})).catch(console.error)},children:[Object(U.jsx)("label",{htmlFor:"username",children:Object(U.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435",required:!0})}),Object(U.jsx)("label",{htmlFor:"password",children:Object(U.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u0430",name:"password",id:"password",required:!0})}),Object(U.jsx)("button",{className:"login-form-btn",children:"\u0412\u043b\u0435\u0437"}),Object(U.jsx)(N.b,{to:"/register",className:"login-form-to-register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})]})});var T=function(e){var t=e.menu,c=e.user,s=e.setUser,n=e.match,r=e.history,i=e.setNotification,a=function(e){g.addToCart(c,e).then((function(e){s(e)})).catch(console.error)};return Object(U.jsxs)("section",{className:"menu",children:[Object(U.jsxs)("article",{className:"food-list",children:[Object(U.jsxs)("article",{className:"salads",children:[Object(U.jsx)("h2",{className:"food-list-title",children:"\u0421\u0430\u043b\u0430\u0442\u0438"}),Object(U.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"salad"===e.category})).map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(F,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(U.jsxs)("article",{className:"soups",children:[Object(U.jsx)("h2",{className:"food-list-title",children:"\u0421\u0443\u043f\u0438"}),Object(U.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"soup"===e.category})).map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(F,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(U.jsxs)("article",{className:"main-dishes",children:[Object(U.jsx)("h2",{className:"food-list-title",children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0438 \u044f\u0441\u0442\u0438\u044f"}),Object(U.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"main"===e.category})).map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(F,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(U.jsxs)("article",{className:"deserts",children:[Object(U.jsx)("h2",{className:"food-list-title",children:"\u0414\u0435\u0441\u0435\u0440\u0442\u0438"}),Object(U.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"desert"===e.category})).map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(F,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(U.jsxs)("article",{className:"drinks",children:[Object(U.jsx)("h2",{className:"food-list-title",children:"\u041d\u0430\u043f\u0438\u0442\u043a\u0438"}),Object(U.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"drink"===e.category})).map((function(e){return Object(U.jsx)("li",{children:Object(U.jsx)(F,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]})]}),c?Object(U.jsx)(D,{user:c,setUser:s,match:n}):Object(U.jsx)(I,{setUser:s,history:r,setNotification:i})]})},A=(c(57),function(e){var t=e.history,c=e.setNotification;Object(s.useEffect)((function(){return function(){return c({})}}),[]);return Object(U.jsxs)("section",{className:"register",children:[Object(U.jsx)(k.g,{className:"register-icon"}),Object(U.jsx)("article",{className:"register-form",children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={username:e.target.username.value,phone:e.target.phone.value,email:e.target.email.value,password:e.target.password.value,repeatPassword:e.target.repeatPassword.value};m.register(s).then((function(e){if("Successful registration"!==e.message){var s={message:e.message,type:"error"};c(s)}else{c({message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f!",type:"success"}),t.push("/login")}})).catch(console.error)},children:[Object(U.jsx)("label",{htmlFor:"username",children:Object(U.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435",required:!0})}),Object(U.jsx)("label",{htmlFor:"phone",children:Object(U.jsx)("input",{type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",id:"phone",required:!0})}),Object(U.jsx)("label",{htmlFor:"email",children:Object(U.jsx)("input",{type:"email",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0449\u0430",name:"email",id:"email",required:!0})}),Object(U.jsx)("label",{htmlFor:"password",children:Object(U.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u0430",name:"password",id:"password",required:!0})}),Object(U.jsx)("label",{htmlFor:"repeatPassword",children:Object(U.jsx)("input",{type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430",name:"repeatPassword",id:"repeatPassword",required:!0})}),Object(U.jsx)("button",{className:"register-form-btn",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u043c\u0435"})]})})]})}),E=function(e){var t=e.history,c=e.setUser;return m.logout().then((function(){c(void 0),t.push("/")})).catch(console.error),null},L=c(5),H=(c(58),c(59),c(60),b.regions),R=b.mapBgRegions;var B=function(e){var t=e.user,c=e.setUser,s=e.toggleNewAddressForm;return Object(U.jsxs)("article",{className:"add-new-address",children:[Object(U.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"}),Object(U.jsxs)("form",{className:"add-new-address-form",onSubmit:function(e){var n,r,i;e.preventDefault();var a=null===(n=e.target.region)||void 0===n?void 0:n.value,o=null===(r=e.target.location)||void 0===r?void 0:r.value,l=null===t||void 0===t||null===(i=t.address)||void 0===i?void 0:i.find((function(e){return e.location===o}));if(a&&o&&!l){var d=H[a],j={region:a,location:o,delivery:d};m.editUserData({addAddress:j,userId:t._id}).then((function(e){return c(e)})).then((function(){return s()})).catch(console.error)}},children:[Object(U.jsx)("label",{htmlFor:"region",children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(U.jsx)("select",{name:"region",id:"region",children:Object.keys(H).map((function(e){return Object(U.jsx)("option",{value:e,children:R[e]},e)}))}),Object(U.jsx)("label",{htmlFor:"add-new-address",children:"\u0410\u0434\u0440\u0435\u0441"}),Object(U.jsx)("input",{type:"text",name:"location",id:"add-new-address"}),Object(U.jsxs)("article",{className:"add-new-address-form-ctrl",children:[Object(U.jsx)("button",{type:"button",className:"close-new-address-btn",onClick:s,children:"\u0417\u0430\u0442\u0432\u043e\u0440\u0438"}),Object(U.jsx)("input",{type:"submit",className:"confirm-new-address-btn",value:"\u0414\u043e\u0431\u0430\u0432\u0438"})]})]})]})},J=b.mapBgRegions,V=function(e){var t=e.user,c=(e.order,e.setOrder),n=e.setUser,r=Object(s.useState)(!1),i=Object(L.a)(r,2),o=i[0],l=i[1],d=function(){l((function(e){return!e}))};Object(s.useEffect)((function(){(null===t||void 0===t?void 0:t.address.length)>0&&c((function(e){return Object(a.a)(Object(a.a)({},e),{},{address:t.address[0]})}))}),[t]);return Object(U.jsxs)("article",{className:"order-address",children:[Object(U.jsx)("h3",{children:"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"}),o?Object(U.jsx)(B,{user:t,setUser:n,toggleNewAddressForm:d}):Object(U.jsxs)("article",{className:"my-address",children:[Object(U.jsxs)("form",{className:"my-address-form",onChange:function(e){var s,n=e.target.value,r=null===t||void 0===t||null===(s=t.address)||void 0===s?void 0:s.find((function(e){return e.location===n}));if(r){var i=r.region,o=r.location,l=r.delivery;c((function(e){return Object(a.a)(Object(a.a)({},e),{},{address:{region:i,location:o,delivery:l}})}))}},children:[Object(U.jsx)("p",{children:"\u041c\u043e\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441\u0438:"}),Object(U.jsx)("select",{name:"address",id:"address",children:null===t||void 0===t?void 0:t.address.map((function(e){return Object(U.jsxs)("option",{value:e.location,children:[e.location,", ",J[e.region]]},e.location)}))})]}),Object(U.jsx)("button",{className:"add-new-address-btn",onClick:d,children:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"})]})]})},M=(c(61),function(e){var t=e.setOrder,c=function(e){var c=e.target.value;t((function(e){return Object(a.a)(Object(a.a)({},e),{},{payment:c})}))};return Object(U.jsxs)("article",{className:"order-payment",children:[Object(U.jsx)("h3",{children:"\u041d\u0430\u0447\u0438\u043d \u043d\u0430 \u043f\u043b\u0430\u0449\u0430\u043d\u0435"}),Object(U.jsxs)("form",{className:"payment-select",children:[Object(U.jsx)("label",{htmlFor:"cash",children:"\u041a\u0435\u0448"}),Object(U.jsx)("input",{type:"radio",id:"cash",name:"payment",value:"cash",onChange:c}),Object(U.jsx)("label",{htmlFor:"cash",children:"\u0421 \u043a\u0430\u0440\u0442\u0430"}),Object(U.jsx)("input",{type:"radio",id:"card",name:"payment",value:"card",onChange:c})]})]})}),G=(c(62),function(e){e.order;var t=e.setOrder;return Object(U.jsxs)("article",{className:"order-description",children:[Object(U.jsx)("h5",{className:"order-description-title",children:"\u0411\u0435\u043b\u0435\u0436\u043a\u0430 \u043a\u044a\u043c \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430"}),Object(U.jsx)("textarea",{name:"description",id:"order-description",cols:"30",rows:"10",onBlur:function(e){var c=e.target.value;t((function(e){return Object(a.a)(Object(a.a)({},e),{},{description:c})}))}})]})});var Q=function(e){var t,c,n,r,i,o,l=e.user,d=e.setUser,j=e.match,u=e.history,h=e.setNotification,O=Object(s.useState)({cart:null===l||void 0===l?void 0:l.cart}),x=Object(L.a)(O,2),f=x[0],p=x[1],v=Object(s.useState)(.5),g=Object(L.a)(v,2),N=g[0],y=g[1];return Object(s.useEffect)((function(){var e;if(Number(null===l||void 0===l||null===(e=l.cart)||void 0===e?void 0:e.totalPrice)>=10)y(.5);else{var t,c=Number(b.regions[null===f||void 0===f||null===(t=f.address)||void 0===t?void 0:t.region]);isNaN(c)||y(c)}}),[l,null===f||void 0===f?void 0:f.address]),Object(s.useEffect)((function(){p((function(e){return Object(a.a)(Object(a.a)({},e),{},{cart:null===l||void 0===l?void 0:l.cart})}))}),[null===l||void 0===l||null===(t=l.cart)||void 0===t?void 0:t.products]),Object(U.jsxs)("section",{className:"finish-order",children:[Object(U.jsx)("article",{className:"finish-order-details",children:(null===l||void 0===l||null===(c=l.cart)||void 0===c||null===(n=c.products)||void 0===n?void 0:n.length)>0?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(D,{user:l,setUser:d,match:j}),Object(U.jsx)(V,{user:l,setUser:d,order:f,setOrder:p}),Object(U.jsx)(M,{order:f,setOrder:p}),Object(U.jsx)(G,{order:f,setOrder:p})]}):Object(U.jsx)("p",{children:"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438 \u0432 \u043a\u043e\u043b\u0438\u0447\u043a\u0430\u0442\u0430..."})}),(null===l||void 0===l||null===(r=l.cart)||void 0===r||null===(i=r.products)||void 0===i?void 0:i.length)>0?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("article",{className:"finish-order-summary",children:void 0!==N?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("p",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",Object(U.jsx)("strong",{children:N.toFixed(2)||.5})," \u043b\u0432."]}),Object(U.jsxs)("p",{className:"finish-order-summary-total-process",children:["\u041a\u0440\u0430\u0439\u043d\u0430 \u0441\u0443\u043c\u0430: ",Object(U.jsxs)("strong",{children:[(Number(null===f||void 0===f||null===(o=f.cart)||void 0===o?void 0:o.totalPrice)+Number(N)).toFixed(2)," \u043b\u0432."]})]})]}):null}),Object(U.jsx)("button",{className:"finish-order-submit-btn",onClick:function(){var e,t,c,s,n={cart:null===f||void 0===f||null===(e=f.cart)||void 0===e?void 0:e.products,address:{region:null===f||void 0===f||null===(t=f.address)||void 0===t?void 0:t.region,location:null===f||void 0===f||null===(c=f.address)||void 0===c?void 0:c.location},delivery:N,totalPrice:(null===f||void 0===f||null===(s=f.cart)||void 0===s?void 0:s.totalPrice)+N,description:f.description||"",payment:null===f||void 0===f?void 0:f.payment,date:(new Date).toLocaleString()};if(n.cart&&n.address.location&&n.address.region&&n.delivery&&n.totalPrice&&n.payment)m.editUserData({order:n,userId:l._id}).then((function(e){e.cart={},d(e);h({message:"\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u043c \u0432\u0438 \u0437\u0430 \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430!",type:"success"})})).then((function(){return u.push("/")})).catch(console.error);else{h({message:"\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438 \u043d\u0430\u0447\u0438\u043d \u043d\u0430 \u043f\u043b\u0430\u0449\u0430\u043d\u0435!",type:"error"})}},children:"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430"})]}):null]})},$=(c(63),c(17)),z=c(24);var K=function(){return Object(U.jsx)("section",{className:"contacts",children:Object(U.jsxs)("article",{className:"contacts-content",children:[Object(U.jsxs)("article",{className:"contacts-phone",children:[Object(U.jsx)($.c,{class:"contacts-icon"}),Object(U.jsx)("h2",{children:"+359 878 123 123"})]}),Object(U.jsxs)("article",{className:"contacts-email",children:[Object(U.jsx)(z.b,{class:"contacts-icon"}),Object(U.jsx)("h2",{children:"delivery@fooddelivery.com"})]}),Object(U.jsxs)("article",{className:"contacts-address",children:[Object(U.jsx)(z.a,{class:"contacts-icon"}),Object(U.jsx)("h2",{children:'\u0433\u0440.\u0421\u043c\u043e\u043b\u044f\u043d,\u0431\u0443\u043b."\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f" 5'})]})]})})},W=(c(64),b.apiURL+"posts/"),X={getPosts:function(){return h(W,"GET").then((function(e){return e.json()})).catch(console.error)},createPost:function(e){return h(W+"create_post","POST",e).then((function(e){return e.json()})).catch(console.error)},editPost:function(e){return h(W+"edit_post","POST",e).then((function(e){return e.json()})).catch(console.error)},deletePost:function(e){return h(W+"delete_post","POST",e).then((function(e){return e.json()})).catch(console.error)}},Y=(c(65),function(e){var t,c=e.item,n=e.likeHandler,r=e.setAllPosts,i=e.user,a=Object(s.useState)(!1),o=Object(L.a)(a,2),l=o[0],d=o[1],j=Object(s.useState)(!1),u=Object(L.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)(!1),m=Object(L.a)(O,2),x=m[0],f=m[1],p=function(e){i&&c.author._id!==i._id&&("like"===e&&(c.likes.includes(i._id)||n(c,e)),"dislike"===e&&(c.dislikes.includes(i._id)||n(c,e)))};Object(s.useEffect)((function(){var e,t;(null===c||void 0===c||null===(e=c.likes)||void 0===e?void 0:e.includes(null===i||void 0===i?void 0:i._id))&&d(!0),(null===c||void 0===c||null===(t=c.dislikes)||void 0===t?void 0:t.includes(null===i||void 0===i?void 0:i._id))&&h(!0)}),[i]),Object(s.useEffect)((function(){var e,t;(null===c||void 0===c||null===(e=c.likes)||void 0===e?void 0:e.includes(null===i||void 0===i?void 0:i._id))&&(d(!0),h(!1)),(null===c||void 0===c||null===(t=c.dislikes)||void 0===t?void 0:t.includes(null===i||void 0===i?void 0:i._id))&&(h(!0),d(!1))}),[c.likes,c.dislikes]);var v=function(){f((function(e){return!e}))};return Object(U.jsxs)("article",{className:"post-item",children:[Object(U.jsxs)("article",{className:"post-item-content",children:[x?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("form",{className:"edit-post-form",onSubmit:function(e){var t=Object.assign(c,{title:e.target.title.value,description:e.target.description.value});X.editPost(t).then((function(e){return r(e)})).catch(console.error)},children:[Object(U.jsx)("label",{htmlFor:"post-form-input-title",children:"\u0417\u0430\u0433\u043b\u0430\u0432\u0438\u0435:"}),Object(U.jsx)("input",{type:"text",defaultValue:c.title,id:"post-form-input-title",name:"title"}),Object(U.jsx)("label",{htmlFor:"post-form-input-description",children:"\u0412\u0430\u0448\u0435\u0442\u043e \u043c\u043d\u0435\u043d\u0438\u0435:"}),Object(U.jsx)("textarea",{defaultValue:c.description,id:"post-form-input-description",name:"description"}),Object(U.jsxs)("article",{className:"post-item-edit-controls form",children:[Object(U.jsx)("button",{children:Object(U.jsx)(k.a,{className:"post-item-edit-confirm"})}),Object(U.jsx)(P.d,{onClick:v})]})]})}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("h4",{className:"post-item-content-title",children:c.title}),Object(U.jsx)("p",{className:"post-item-content-description",children:c.description})]}),Object(U.jsxs)("article",{className:"post-item-details",children:[Object(U.jsx)("p",{children:c.author.username}),(null===c||void 0===c||null===(t=c.author)||void 0===t?void 0:t._id)===(null===i||void 0===i?void 0:i._id)?Object(U.jsx)("article",{className:"post-item-edit-controls",children:x?null:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(k.b,{onClick:v}),Object(U.jsx)(k.f,{onClick:function(){X.deletePost(c).then((function(e){return r(e)})).then((function(){})).catch(console.error)}})]})}):null,Object(U.jsx)("p",{children:c.created_at.split("T")[0]})]})]}),Object(U.jsxs)("article",{className:"post-item-likes",children:[Object(U.jsxs)("article",{className:"like-wrapper",children:[Object(U.jsx)("p",{className:"like-counter like",children:c.likes.length}),Object(U.jsx)($.b,{className:l?"like isLiked":"like",onClick:p.bind(null,"like")})]}),Object(U.jsxs)("article",{className:"like-wrapper",children:[Object(U.jsx)("p",{className:"like-counter dislike",children:c.dislikes.length}),Object(U.jsx)($.a,{className:b?"dislike isDisliked":"dislike",onClick:p.bind(null,"dislike")})]})]})]})}),Z=function(e){var t=e.setNotification,c=e.user,n=Object(s.useState)([]),r=Object(L.a)(n,2),i=r[0],a=r[1];Object(s.useEffect)((function(){X.getPosts().then((function(e){a(e)})).catch(console.error)}),[]);var o=function(e,t){var s=function(e,t){e.push(c._id);var s=t.findIndex((function(e){return e===c._id}));t.includes(null===c||void 0===c?void 0:c._id)&&t.splice(s,1)};"like"===t?s(e.likes,e.dislikes):s(e.dislikes,e.likes),X.editPost(e).then((function(e){a(e)})).catch(console.error)};return Object(U.jsxs)("section",{className:"posts",children:[Object(U.jsx)("article",{className:"post-list",children:0===(null===i||void 0===i?void 0:i.length)?Object(U.jsx)("p",{children:"\u041d\u044f\u043c\u0430 \u043f\u0440\u0435\u0434\u0438\u0448\u043d\u0438 \u043c\u043d\u0435\u043d\u0438\u044f..."}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(_.a,{className:"post-list-logo"}),null===i||void 0===i?void 0:i.sort((function(e,t){return Date.parse(t.created_at)-Date.parse(e.created_at)})).map((function(e){return Object(U.jsx)(Y,{item:e,likeHandler:o,setAllPosts:a,user:c},(null===e||void 0===e?void 0:e.description)+(null===e||void 0===e?void 0:e.title)+(null===e||void 0===e?void 0:e.author.username))})),c?null:Object(U.jsx)("p",{className:"post-list-title-info",children:"* \u0421\u0430\u043c\u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u043d\u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438 \u043e\u0446\u0435\u043d\u044f\u0432\u0430\u0442 \u043c\u043d\u0435\u043d\u0438\u044f."})]})}),c?Object(U.jsxs)("article",{className:"post-create",children:[Object(U.jsx)("h4",{children:"\u0421\u043f\u043e\u0434\u0435\u043b\u0438 \u043c\u043d\u0435\u043d\u0438\u0435"}),Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={title:e.target.title.value,description:e.target.description.value,author:c._id};X.createPost(s).then((function(c){var s={message:c.message,type:"error"};c.message?t(s):(s.message="\u0412\u0430\u0448\u0435\u0442\u043e \u043c\u043d\u0435\u043d\u0438\u0435 \u0431\u0435\u0448\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u043e!",s.type="success",t(s),a(c),e.target.title.value="",e.target.description.value="")})).catch(console.error)},className:"new-post-form",children:[Object(U.jsx)("input",{type:"text",required:!0,placeholder:"\u0417\u0430\u0433\u043b\u0430\u0432\u0438\u0435",name:"title"}),Object(U.jsx)("textarea",{name:"description",required:!0,placeholder:"\u0412\u0430\u0448\u0435\u0442\u043e \u043c\u043d\u0435\u043d\u0438\u0435...",cols:"30",rows:"10"}),Object(U.jsx)("button",{className:"post-create-btn",children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u0439"})]})]}):null]})},ee=(c(66),function(){return Object(U.jsxs)("section",{className:"about",children:[Object(U.jsx)(P.e,{className:"about-logo"}),Object(U.jsxs)("article",{className:"about-content",children:[Object(U.jsx)("q",{className:"about-content-text",children:"\u0417\u0430 \u043d\u0430\u0441 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e\u0442\u043e \u043d\u0430 \u0445\u0440\u0430\u043d\u0430\u0442\u0430 \u0435 \u043e\u0441\u043d\u043e\u0432\u0435\u043d \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442. \u041d\u0430\u0448\u0430\u0442\u0430 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0435 \u0434\u0430 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043c\u0435 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0438\u0442\u0435 \u0441\u0438 \u0442\u043e\u0432\u0430, \u043a\u043e\u0435\u0442\u043e \u0441\u0430\u043c\u0438\u0442\u0435 \u043d\u0438\u0435 \u0441\u043b\u0430\u0433\u0430\u043c\u0435 \u043d\u0430 \u043d\u0430\u0448\u0430\u0442\u0430 \u043c\u0430\u0441\u0430. \u0412\u0435\u0447\u0435 \u0441 \u043d\u0430\u0442\u0440\u0443\u043f\u0430\u043d \u0431\u043e\u0433\u0430\u0442 \u043e\u043f\u0438\u0442 \u0432 \u0433\u043e\u0442\u0432\u0435\u043d\u0435\u0442\u043e \u0438 \u043a\u0443\u043b\u0438\u043d\u0430\u0440\u0438\u044f\u0442\u0430, \u0441\u044a\u0437\u0434\u0430\u0434\u043e\u0445\u043c\u0435 \u043d\u0430\u0448\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041d\u0438\u0435 \u0432\u044f\u0440\u0432\u0430\u043c\u0435, \u0447\u0435 \u0437\u0430\u0431\u044a\u0440\u0437\u0430\u043d\u043e\u0442\u043e \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u0438\u0435 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0431\u044a\u0434\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0430 \u0437\u0430 \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441 \u0441 \u0438\u0437\u0431\u043e\u0440\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0430. \u0412\u0441\u0435\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0435\u043d \u0434\u0435\u043d \u0412\u0438 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043c\u0435 \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u043e \u043e\u0431\u0435\u0434\u043d\u043e \u043c\u0435\u043d\u044e \u0438 \u043e\u0447\u0430\u043a\u0432\u0430\u043c\u0435 \u0412\u0430\u0448\u0438\u044f \u0438\u0437\u0431\u043e\u0440!"}),Object(U.jsxs)("article",{className:"about-footer",children:[Object(U.jsx)("p",{className:"about-footer-content",children:'"\u0424\u0443\u0443\u0434 \u0414\u0435\u043b\u0438\u0432\u044a\u0440\u0438" \u0415\u041e\u041e\u0414 \u0415\u0418\u041a:1234412342 \u0441\u044a\u0441 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435: \u0433\u0440.\u0421\u043c\u043e\u043b\u044f\u043d,\u0431\u0443\u043b."\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f" 5 \u041c\u041e\u041b.:\u0421\u0442\u0435\u0444\u0430\u043d \u0421\u0442\u0430\u043d\u0447\u0435\u0432'}),Object(U.jsx)("img",{src:"foodDelivery-icon.png",alt:"company logo"})]})]})]})}),te=(c(67),c(31)),ce=function(){return Object(U.jsxs)("section",{className:"conditions",children:[Object(U.jsx)(te.a,{className:"conditions-icon"}),Object(U.jsx)("h2",{className:"condition-item-title",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(U.jsx)("article",{className:"conditions-item",children:Object(U.jsxs)("p",{children:["\u0412\u0441\u0435\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0435\u043d \u0434\u0435\u043d \u0412\u0438\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043f\u043e\u0440\u044a\u0447\u0430\u0442\u0435 \u0445\u0440\u0430\u043d\u0430 \u0437\u0430 \u0432\u043a\u044a\u0449\u0438 \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u043d\u043e\u0442\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u043d\u0430\u0448\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041e\u0441\u0432\u0435\u043d \u0447\u0440\u0435\u0437 \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043da, \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043f\u043e\u0440\u044a\u0447\u0430\u0442\u0435 \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e \u043e\u0431\u0430\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 ",Object(U.jsx)("strong",{children:"0876 123 123"})," \u0438\u043b\u0438 \u0447\u0440\u0435\u0437 e-mail:",Object(U.jsx)("strong",{children:" delivery@fooddelivery.com"})]})}),Object(U.jsx)("h2",{className:"condition-item-title",children:"\u0426\u0435\u043d\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(U.jsx)("article",{className:"conditions-item",children:Object(U.jsxs)("p",{children:["\u0426\u0435\u043d\u0430\u0442\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430\u0442\u0430 \u0435 ",Object(U.jsx)("strong",{children:"0.50\u043b\u0432"}),". \u041f\u043e\u0440\u044a\u0447\u043a\u0438 \u0437\u0430 \u043a\u0432\u0430\u0440\u0430\u043b\u0438\u0442\u0435 \u041a\u0430\u043f\u0442\u0430\u0436\u0430, \u0420\u0430\u0439\u043a\u043e\u0432\u043e \u0438 \u0423\u0441\u0442\u043e\u0432\u043e, \u043a\u043e\u0438\u0442\u043e \u0441\u0430 \u043d\u0430 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043f\u043e\u0434 ",Object(U.jsx)("strong",{children:"10\u043b\u0432"}),"., \u0449\u0435 \u0441\u0435 \u0442\u0430\u043a\u0441\u0443\u0432\u0430\u0442 \u0441 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 - ",Object(U.jsx)("strong",{children:"1.50\u043b\u0432"}),"."]})}),Object(U.jsx)("h2",{className:"condition-item-title",children:"\u0420\u0430\u0431\u043e\u0442\u043d\u043e \u0432\u0440\u0435\u043c\u0435"}),Object(U.jsx)("article",{className:"conditions-item",children:Object(U.jsxs)("p",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0438\u0442\u0435 \u043d\u0430 \u0445\u0440\u0430\u043d\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u043e\u0442 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a \u0434\u043e \u043f\u0435\u0442\u044a\u043a \u0434\u043e ",Object(U.jsx)("strong",{children:"13:00"})," \u0447\u0430\u0441\u0430. \u041f\u0440\u0438\u0435\u043c\u0430\u043c\u0435 \u043f\u043e\u0440\u044a\u0447\u043a\u0438 \u0434\u043e ",Object(U.jsx)("strong",{children:"12:30\u0447"}),"\u0430\u0441\u0430! \u041f\u043e\u0447\u0438\u0432\u043d\u0438 \u0434\u043d\u0438 - ",Object(U.jsx)("strong",{children:"\u0441\u044a\u0431\u043e\u0442\u0430 \u0438 \u043d\u0435\u0434\u0435\u043b\u044f"}),", \u043a\u0430\u043a\u0442\u043e \u0438 ",Object(U.jsx)("strong",{children:"\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438"}),"."]})})]})},se=c(6),ne=(c(68),c(19)),re=function(e){var t=e.notification,c=e.setNotification;return"error"!==(null===t||void 0===t?void 0:t.type)&&setTimeout((function(){c({})}),2500),Object(U.jsx)("article",{className:"notification "+(null===t||void 0===t?void 0:t.type),children:"error"===(null===t||void 0===t?void 0:t.type)?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ne.c,{className:"notification-icon"}),Object(U.jsx)("article",{className:"notification-content",children:Object(U.jsx)("p",{children:null===t||void 0===t?void 0:t.message})}),Object(U.jsx)(ne.a,{className:"notification-close",onClick:function(){c({})}})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ne.b,{className:"notification-icon"}),Object(U.jsx)("article",{className:"notification-content",children:Object(U.jsx)("p",{children:null===t||void 0===t?void 0:t.message})})]})})},ie=(c(69),c(25)),ae=c.n(ie),oe=c(32),le=(c(71),function(e){var t=e.user,c=e.setUser,n=e.setNotification,r=e.history;Object(s.useEffect)((function(){return function(){return n({})}}),[]);var i=Object(s.useState)(!1),a=Object(L.a)(i,2),o=a[0],l=a[1],d=function(){l((function(e){return!e}))},j=function(e,c,s){var r=Object(L.a)(Object.entries(e)[0],2),i=r[0];if(r[1].length<c){var a={message:'\u0422\u0432\u044a\u0440\u0434\u0435 \u043c\u0430\u043b\u043a\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0437\u0430 "'.concat(i,'". \u0422\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u043c\u0438\u043d\u0438\u043c\u0443\u043c ').concat(c," \u0441\u0438\u043c\u0432\u043e\u043b\u0430."),type:"error"};return s.target[i].value=t[i],n(a),Promise.reject("not enough symbols")}return Promise.resolve()},u=function(){var e=Object(oe.a)(ae.a.mark((function e(s){var i,a,o,l,u;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i=s.target.username.value,a=s.target.email.value,o=s.target.phone.value,l={},u=!1,i===t.username){e.next=11;break}return e.next=9,j({username:i},3,s).then((function(){l.username=i})).catch((function(){return u=!0}));case 9:if(!u){e.next=11;break}return e.abrupt("return");case 11:if(o===t.phone){e.next=16;break}return e.next=14,j({phone:o},5,s).then((function(){return l.phone=o})).catch((function(){return u=!0}));case 14:if(!u){e.next=16;break}return e.abrupt("return");case 16:if(a===t.email){e.next=26;break}return e.next=19,j({email:a},6,s).then((function(){return l.email=a})).catch((function(){return u=!0}));case 19:if(!u){e.next=21;break}return e.abrupt("return");case 21:if(a.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/g)){e.next=26;break}return n({message:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0435\u043c\u0430\u0439\u043b \u0430\u0434\u0440\u0435\u0441",type:"error"}),s.target.email.value=t.email,d(),e.abrupt("return");case 26:if(0!==Object.keys(l).length){e.next=28;break}return e.abrupt("return",d());case 28:m.editUserData({newData:l,userId:t._id}).then((function(e){if(e.message){var r=e.message.split("dup key: ");if(r.length>0){var i=JSON.parse(JSON.stringify(r[1].split(" "))),a=Object.values(i)[1].split(":")[0].trim();return s.target[a].value=t[a],n({message:"\u0418\u043c\u0435\u0442\u043e \u0432\u0435\u0447\u0435 \u0435 \u0437\u0430\u0435\u0442\u043e - ".concat(a),type:"error"}),void d()}var o={message:e.message,type:"error"};return n(o),d()}n({message:"\u041f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0430 \u0437\u0430\u043f\u0430\u043c\u0435\u0442\u0435\u043d\u0438.",type:"success"}),c(e),d()})).catch(r.push("/profile"));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)("article",{className:"profile-info",children:Object(U.jsxs)("form",{className:"profile-info-form",onSubmit:u,children:[Object(U.jsx)("label",{htmlFor:"username",children:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435"}),Object(U.jsx)("input",{type:"text",defaultValue:null===t||void 0===t?void 0:t.username,name:"username",disabled:!o,className:o?"editing":""}),Object(U.jsx)("label",{htmlFor:"email",children:"\u0415-\u043c\u0430\u0439\u043b"}),Object(U.jsx)("input",{type:"email",defaultValue:null===t||void 0===t?void 0:t.email,name:"email",disabled:!o,className:o?"editing":""}),Object(U.jsx)("label",{htmlFor:"phone",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(U.jsx)("input",{type:"phone",defaultValue:null===t||void 0===t?void 0:t.phone,name:"phone",disabled:!o,className:o?"editing":""}),Object(U.jsxs)("article",{className:"profile-info-form-btn-wrapper",children:[Object(U.jsx)("button",{className:o?"profile-form-btn back":"profile-form-btn edit",type:"button",onClick:d,children:o?"\u041d\u0430\u0437\u0430\u0434":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439"}),o?Object(U.jsx)("button",{type:"submit",className:"profile-form-btn",children:"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438"}):null]})]})})}),de=(c(72),c(73),b.mapBgRegions),je=function(e){var t=e.address,c=e.index,n=e.onDeleteAddressHandler,r=e.onUpdateExistAddressHandler,i=e.setNotification,a=Object(s.useState)(!1),o=Object(L.a)(a,2),l=o[0],d=o[1],j=Object(s.useState)(t.location),u=Object(L.a)(j,2),b=u[0],h=u[1],O=function(e){e||h(t.location),d((function(e){return!e}))};return Object(U.jsxs)("article",{className:"profile-address-item",children:[Object(U.jsxs)("article",{className:"profile-address-item-wrapper region",children:[Object(U.jsx)("label",{htmlFor:"add-address-region",children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(U.jsx)("input",{type:"text",id:"add-address-region",name:"region",defaultValue:de[t.region],disabled:!0})]}),Object(U.jsxs)("article",{className:"profile-address-item-wrapper location",children:[Object(U.jsx)("label",{htmlFor:"add-address-location",children:"\u0422\u043e\u0447\u0435\u043d \u0430\u0434\u0440\u0435\u0441"}),Object(U.jsx)("input",{type:"text",id:"add-address-location",name:"location",value:b,disabled:!l,onChange:function(e){h((function(t){return e.target.value}))},className:l?"editing-location":""})]}),Object(U.jsx)("article",{className:"profile-address-item-wrapper buttons",children:l?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(k.a,{className:"confirm",onClick:function(){if(b===t.location)return O();if(b.length<10)return i({message:"\u0422\u0432\u044a\u0440\u0434\u0435 \u043a\u0440\u0430\u0442\u044a\u043a \u0430\u0434\u0440\u0435\u0441! \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0438 \u0441\u0430 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0430.",type:"error"}),void O(!1);var e={region:t.region,location:b,delivery:t.delivery};r(t,e,c)}}),Object(U.jsx)(P.d,{onClick:O.bind(null,!1)})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(k.b,{onClick:O}),Object(U.jsx)(k.f,{onClick:function(){return n(t,Number(c))}})]})})]})},ue=function(e){var t=e.user,c=e.setUser,n=e.setNotification,r=e.onDeleteAddressHandler,i=e.onUpdateExistAddressHandler,a=Object(s.useState)(!1),o=Object(L.a)(a,2),l=o[0],d=o[1],j=function(){d((function(e){return!e}))};return Object(U.jsxs)("section",{className:"profile-address",children:[null===t||void 0===t?void 0:t.address.map((function(e,t){return Object(U.jsx)(je,{address:e,index:t,onDeleteAddressHandler:r,onUpdateExistAddressHandler:i,setNotification:n},(null===e||void 0===e?void 0:e.location)+(null===e||void 0===e?void 0:e.region))})),0===(null===t||void 0===t?void 0:t.address.length)?Object(U.jsx)("p",{children:"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u0430\u0434\u0440\u0435\u0441\u0438..."}):null,l?Object(U.jsx)(B,{user:t,setUser:c,toggleNewAddressForm:j}):Object(U.jsx)("button",{className:"add-new-address-btn",onClick:j,children:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"})]})};c(74),c(75);var be=function(e){var t,c=e.order,s=e.closeHandler;return Object(U.jsxs)("article",{className:"show-order-cart",children:[Object(U.jsxs)("article",{className:"show-order-cart-icons",children:[Object(U.jsx)(k.e,{className:"profile-order-cart-icon"}),Object(U.jsx)(P.d,{className:"close-order-cart",onClick:s})]}),Object(U.jsxs)("table",{className:"order-cart-table",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442"}),Object(U.jsx)("th",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(U.jsx)("th",{children:"\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u0430 \u0446\u0435\u043d\u0430"})]})}),Object(U.jsxs)("tbody",{children:[null===c||void 0===c||null===(t=c.cart)||void 0===t?void 0:t.map((function(e,t){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:e.name}),Object(U.jsx)("td",{children:e.quantity}),Object(U.jsxs)("td",{children:[Number(e.price).toFixed(2)," \u043b\u0432."]})]},t)})),Object(U.jsxs)("tr",{className:"tr-summary",children:[Object(U.jsx)("th",{children:"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"}),Object(U.jsx)("th",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(U.jsx)("th",{children:"\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430"})]}),Object(U.jsxs)("tr",{className:"tr-summary-content",children:[Object(U.jsx)("td",{className:"tr-summary-content-item",children:function(e){var t=0;return e.forEach((function(e){t+=e.price*e.quantity})),t.toFixed(2)+" \u043b\u0432."}(c.cart)}),Object(U.jsxs)("td",{className:"tr-summary-content-item",children:[Number(c.delivery).toFixed(2)," \u043b\u0432."]}),Object(U.jsxs)("td",{className:"tr-summary-content-item",children:[Number(c.totalPrice).toFixed(2)," \u043b\u0432."]})]})]})]}),c.description?Object(U.jsxs)("article",{className:"show-order-cart-description",children:[Object(U.jsx)("p",{className:"description-title",children:"\u0411\u0435\u043b\u0435\u0436\u043a\u0430 \u043a\u044a\u043c \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430:"}),Object(U.jsx)("q",{children:c.description})]}):null]})};var he=function(e){var t=e.user,c=Object(s.useState)(!1),n=Object(L.a)(c,2),r=n[0],i=n[1],a=Object(s.useState)(void 0),o=Object(L.a)(a,2),l=o[0],d=o[1],j=function(e){if(!e)return i((function(e){return!e})),void d((function(e){}));i((function(e){return!e})),d((function(t){return e}))};return Object(U.jsxs)("article",{className:"profile-orders",children:[0===(null===t||void 0===t?void 0:t.orders.length)?Object(U.jsx)("p",{children:"\u0412\u0441\u0435 \u043e\u0449\u0435 \u043d\u044f\u043c\u0430\u0442\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u0435\u043d\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0438..."}):Object(U.jsxs)("table",{className:"order-table",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(U.jsx)("th",{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(U.jsx)("th",{children:"\u041f\u043b\u0430\u0449\u0430\u043d\u0435"}),Object(U.jsx)("th",{children:"\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430"}),Object(U.jsx)("th",{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"})]})}),Object(U.jsx)("tbody",{children:null===t||void 0===t?void 0:t.orders.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})).map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:e.date}),Object(U.jsx)("td",{children:e.address.location}),Object(U.jsx)("td",{children:e.payment}),Object(U.jsxs)("td",{children:[Number(e.totalPrice).toFixed(2)," \u043b\u0432."]}),Object(U.jsx)("td",{children:Object(U.jsx)(P.f,{className:"magnifier",onClick:j.bind(null,e),disabled:r})})]},e._id)}))})]}),r?Object(U.jsx)(be,{order:l,closeHandler:j}):null]})},Oe=function(e){var t=e.user,c=e.setUser,s=e.match,n=e.setNotification,r=function(e,s){t.address.splice(s,1),m.editUserData({deleteAddress:e,userId:t._id}),c(t)},i=function(e,s,n){t.address.splice(n,1,s),m.editUserData({deleteAddress:e,userId:t._id}),m.editUserData({addAddress:s,userId:t._id}),c(t)};return Object(U.jsx)("section",{className:"profile",children:t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("section",{className:"profile-header",children:Object(U.jsxs)("nav",{className:"profile-header-nav",children:[Object(U.jsx)(N.c,{to:s.url,exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u0438"}),Object(U.jsx)(N.c,{to:s.url+"/address",exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441\u0438"}),Object(U.jsx)(N.c,{to:s.url+"/orders",exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u043f\u043e\u0440\u044a\u0447\u043a\u0438"})]})}),Object(U.jsxs)("section",{className:"profile-content",children:[Object(U.jsx)("article",{className:"profile-icon-wrapper",children:Object(U.jsx)(y.b,{className:"profile-icon"})}),Object(U.jsxs)(se.c,{children:[Object(U.jsx)(se.a,{path:"/profile",exact:!0,render:function(e){return Object(U.jsx)(le,Object(a.a)(Object(a.a)({},e),{},{user:t,setUser:c,setNotification:n}))}}),Object(U.jsx)(se.a,{path:"/profile/address",exact:!0,render:function(e){return Object(U.jsx)(ue,Object(a.a)(Object(a.a)({},e),{},{user:t,setUser:c,setNotification:n,onDeleteAddressHandler:r,onUpdateExistAddressHandler:i}))}}),Object(U.jsx)(se.a,{path:"/profile/orders",exact:!0,render:function(e){return Object(U.jsx)(he,Object(a.a)(Object(a.a)({},e),{},{user:t}))}})]})]})]}):null})},me=function(e){Object(j.a)(c,e);var t=Object(u.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).state={menu:[],currentUser:void 0,notification:{message:"",type:""}},s.setUser=s.setUser.bind(Object(d.a)(s)),s.getUserInfo=s.getUserInfo.bind(Object(d.a)(s)),s.setNotification=s.setNotification.bind(Object(d.a)(s)),s}return Object(l.a)(c,[{key:"componentDidMount",value:function(){var e=this;g.getDailyMenu().then((function(t){e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{menu:t})}))})).catch((function(e){return console.error(e)})),m.getUserInfo().then((function(t){t&&e.setState((function(e){return{currentUser:t.message?void 0:t}}))})).catch((function(e){return console.error(e)}))}},{key:"setUser",value:function(e){return this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentUser:e})}))}},{key:"setNotification",value:function(e){return this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{notification:e})}))}},{key:"getUserInfo",value:function(){var e=this;m.getUserInfo().then((function(t){console.log(t),e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentUser:t})}))})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(C,{user:this.state.currentUser}),this.state.notification.message?Object(U.jsx)(re,{notification:this.state.notification,setNotification:this.setNotification}):null,Object(U.jsx)("main",{className:"app-main",children:Object(U.jsxs)(se.c,{children:[Object(U.jsx)(se.a,{path:"/",exact:!0,render:function(t){return Object(U.jsx)(T,Object(a.a)(Object(a.a)({},t),{},{menu:e.state.menu,user:e.state.currentUser,setUser:e.setUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/register",exact:!0,render:function(t){return Object(U.jsx)(A,Object(a.a)(Object(a.a)({},t),{},{setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/login",exact:!0,render:function(t){return Object(U.jsx)(I,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/profile",render:function(t){return Object(U.jsx)(Oe,Object(a.a)(Object(a.a)({},t),{},{user:e.state.currentUser,setUser:e.setUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/logout",exact:!0,render:function(t){return Object(U.jsx)(E,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser}))}}),Object(U.jsx)(se.a,{path:"/cart",exact:!0,render:function(t){return Object(U.jsx)(D,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/order",exact:!0,render:function(t){return Object(U.jsx)(Q,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/posts",exact:!0,render:function(t){return Object(U.jsx)(Z,Object(a.a)(Object(a.a)({},t),{},{user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(U.jsx)(se.a,{path:"/contacts",exact:!0,component:K}),Object(U.jsx)(se.a,{path:"/about",exact:!0,component:ee}),Object(U.jsx)(se.a,{path:"/conditions",exact:!0,component:ce})]})}),Object(U.jsx)(w,{})]})}}]),c}(s.Component),xe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,77)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),s(e),n(e),r(e),i(e)}))};i.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(N.a,{children:Object(U.jsx)(me,{})})}),document.getElementById("root")),xe()}]),[[76,1,2]]]);
//# sourceMappingURL=main.efba033b.chunk.js.map