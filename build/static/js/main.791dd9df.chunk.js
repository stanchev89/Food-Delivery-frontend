(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],Array(39).concat([function(e,t,c){},function(e,t,c){},function(e,t,c){},,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),r=c(26),i=c.n(r),a=(c(39),c(3)),o=c(27),l=c(28),d=c(14),j=c(34),u=c(33),b=(c(40),{regions:{smolyan:.5,raykovo:1.5,ustovo:1.5,kaptaja:1.5},mapBgRegions:{smolyan:"\u0421\u043c\u043e\u043b\u044f\u043d",raykovo:"\u0420\u0430\u0439\u043a\u043e\u0432\u043e",ustovo:"\u0423\u0441\u0442\u043e\u0432\u043e",kaptaja:"\u041a\u0430\u043f\u0442\u0430\u0436\u0430"}});function h(e,t,c){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},credentials:"include",body:c?JSON.stringify(c):void 0})}var O={login:function(e,t){return h("user/login","POST",{username:e,password:t}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},register:function(e){return h("user/register","POST",e).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},editUserData:function(e){return h("user/profile","PUT",e).then((function(e){return e.json()})).catch(console.error)},getUserInfo:function(){return h("user/profile","GET").then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},logout:function(){return h("user/logout","POST").then((function(e){return e.json()})).catch(console.error)}},m={products:[],totalPrice:0};function x(e,t){var c=this;return e.length===t.length&&e.every((function(e,s){return c.objectsEqual(e,t[s])}))}function f(e){return e.totalPrice=0,e.products.forEach((function(t){e.totalPrice+=t.quantity*t.price})),e.totalPrice}var p={getDailyMenu:function(){return fetch("dishes/").then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},addToCart:function(e,t,c){var s,n=e.cart,r=null===(s=n.products)||void 0===s?void 0:s.find((function(e){return e.name===t.name&&e.price===t.price&&x(e.selected_options,t.selected_options)}));return r?c?0===r.quantity&&r.quantity++:r.quantity+=1:(t.quantity=1,n.products=n.products?n.products.concat(t):[t]),n.totalPrice=f(n),O.editUserData({cart:n})},removeItemFromCart:function(e,t){var c,s,n,r,i=null===(c=e.cart)||void 0===c||null===(s=c.products)||void 0===s?void 0:s.findIndex((function(e){return e.name===t.name&&e.price===t.price&&x(e.selected_options,t.selected_options)}));return null===(n=e.cart)||void 0===n||null===(r=n.products)||void 0===r||r.splice(i,1),e.cart.totalPrice=f(e.cart),O.editUserData({cart:e.cart})},clearCart:function(){return O.editUserData({cart:m})}},v=(c(41),c(4)),g=c(16),N=c(8),y=c(1);var k=function(e){var t=e.user;return Object(y.jsxs)("article",{className:"container-header",children:[Object(y.jsx)("article",{className:"container-left",children:Object(y.jsx)(v.b,{to:"/",children:Object(y.jsx)("img",{src:"foodDelivery-icon.png",alt:"site-logo",className:"logo"})})}),Object(y.jsx)("article",{className:"container-middle",children:Object(y.jsx)("nav",{className:"nav-bar",children:Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/",exact:!0,activeClassName:"is-active",children:"\u041e\u0431\u0435\u0434\u043d\u043e \u043c\u0435\u043d\u044e"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/about",exact:!0,activeClassName:"is-active",children:"\u0417\u0430 \u043d\u0430\u0441"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/conditions",exact:!0,activeClassName:"is-active",children:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/posts",exact:!0,activeClassName:"is-active",children:"\u041c\u043d\u0435\u043d\u0438\u044f"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/contacts",exact:!0,activeClassName:"is-active",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]})})}),Object(y.jsx)("article",{className:"container-right",children:Object(y.jsx)("article",{className:"user-bar",children:(null===t||void 0===t?void 0:t.username)?Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(y.jsxs)(v.c,{to:"/profile",className:"user-bar-username-wrapper",children:[Object(y.jsx)("p",{className:"user-bar-username",children:null===t||void 0===t?void 0:t.username}),Object(y.jsx)(g.b,{})]})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/cart",children:Object(y.jsx)(g.a,{})})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/logout",children:Object(y.jsx)(N.d,{})})})]}):Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/login",exact:!0,activeClassName:"is-active",children:"\u0412\u0445\u043e\u0434"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"/register",exact:!0,activeClassName:"is-active",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})})]})};c(51);var U=function(e){return Object(y.jsxs)("section",{className:"footer",children:[Object(y.jsx)("nav",{className:"footer-nav-bar",children:Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/",children:"\u041c\u0435\u043d\u044e"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/about",children:"\u0417\u0430 \u043d\u0430\u0441"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/conditions",children:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/posts",children:"\u041c\u043d\u0435\u043d\u0438\u044f"})}),Object(y.jsx)("li",{children:Object(y.jsx)(v.b,{to:"/contacts",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})]})}),Object(y.jsxs)("article",{className:"footer-icons",children:[Object(y.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_visa.png"}),Object(y.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_master.png"}),Object(y.jsx)("img",{height:"40",src:"https://shoplineimg.com/assets/footer/card_paypal.png"})]}),Object(y.jsx)("h5",{children:"Food Delivery \xa9 2021"})]})};c(52),c(53);var C=function(e){var t=e.dish,c=e.addToCart,s=e.isLogged;return Object(y.jsxs)("article",{className:"dish",children:[Object(y.jsx)("img",{src:t.img,alt:"dish img"}),Object(y.jsxs)("article",{className:"dish-content",children:[Object(y.jsx)("h3",{children:t.name}),Object(y.jsx)("ul",{className:"products",children:Object(y.jsxs)("p",{children:["\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438: ",t.products.join(", ")]})}),Object(y.jsxs)("p",{children:[t.weight," \u0433\u0440."]})]}),Object(y.jsxs)("article",{className:"dish-buy",children:[Object(y.jsx)("article",{className:"dish-buy-options"}),Object(y.jsxs)("article",{className:"dish-buy-order",children:[Object(y.jsxs)("h3",{className:"price",children:[t.price.toFixed(2)," \u043b\u0432."]}),s?Object(y.jsx)("button",{className:"price-btn",onClick:c.bind(null,t),children:"\u0414\u043e\u0431\u0430\u0432\u0438"}):null]})]})]})},w=(c(54),c(18)),F=(c(55),c(11));var P=function(e){var t=e.item,c=e.onChangeItemQuantity,s=e.onRemoveItem;return Object(y.jsx)(y.Fragment,{children:t?Object(y.jsxs)("article",{className:"cart-item",children:[Object(y.jsx)("h5",{className:"cart-item-title",children:t.name}),Object(y.jsxs)("article",{className:"cart-item-quantity",children:[Object(y.jsxs)("article",{className:"cart-item-quantity-icons",children:[Object(y.jsx)(F.b,{className:"item-quantity-up",onClick:c.bind(null,t,"add")}),Object(y.jsx)(F.a,{className:"item-quantity-down",onClick:c.bind(null,t,"subtract")})]}),Object(y.jsxs)("p",{children:[" ",Object(y.jsx)("strong",{children:t.quantity})," * ",Object(y.jsx)("i",{children:Number(t.price).toFixed(2)})," \u043b\u0432. ="]}),Object(y.jsxs)("p",{className:"item-total-price",children:[Number(t.quantity*t.price).toFixed(2)," \u043b\u0432."]}),Object(y.jsx)(F.c,{className:"cart-item-remove-icon",label:"Remove dish",onClick:s.bind(null,t)})]})]}):Object(y.jsx)("p",{children:"Loading..."})})};var S=function(e){var t,c,s,n,r=e.user,i=e.setUser,a=e.match,o=function(e,t){"add"===t?e.quantity++:e.quantity--,p.addToCart(r,e,t).then((function(e){return i(e)})).catch(console.error)},l=function(e){p.removeItemFromCart(r,e).then((function(e){return i(e)})).catch(console.error)};return Object(y.jsxs)("section",{className:"cart",children:[Object(y.jsxs)("article",{className:"cart-icon-wrapper",children:[Object(y.jsx)(N.e,{className:"cart-icon"}),Object(y.jsx)(w.b,{className:"cart-trash-icon",onClick:function(){p.clearCart().then((function(e){return i(e)})).catch(console.error)}})]}),(null===r||void 0===r||null===(t=r.cart)||void 0===t||null===(c=t.products)||void 0===c?void 0:c.length)>0?Object(y.jsxs)("article",{className:"cart-dishes",children:[Object(y.jsx)("ul",{children:null===r||void 0===r||null===(s=r.cart)||void 0===s?void 0:s.products.map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(P,{item:e,onChangeItemQuantity:o,onRemoveItem:l})},null===e||void 0===e?void 0:e.name)}))}),Object(y.jsxs)("article",{className:"cart-summary",children:[Object(y.jsx)("p",{className:"cart-summary-text",children:"\u041e\u0431\u0449\u043e"}),Object(y.jsxs)("article",{className:"cart-summary-ctrl",children:[Object(y.jsxs)("p",{className:"cart-total-price",children:[Number(null===r||void 0===r||null===(n=r.cart)||void 0===n?void 0:n.totalPrice).toFixed(2)," \u043b\u0432."]}),a.path.includes("order")?null:Object(y.jsx)(v.b,{to:"order",children:Object(y.jsx)("button",{className:"cart-summary-btn",children:"\u041f\u043e\u0440\u044a\u0447\u0430\u0439"})})]})]})]}):Object(y.jsx)("p",{children:"\u041d\u044f\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438..."})]})},D=c(30),_=(c(56),function(e){var t=e.setUser,c=e.history,n=e.setNotification;Object(D.a)(e,["setUser","history","setNotification"]);Object(s.useEffect)((function(){return function(){return n({})}}),[]);return Object(y.jsxs)("section",{className:"login",children:[Object(y.jsx)(N.c,{className:"login-icon"}),Object(y.jsx)("article",{className:"login-form",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=e.target.username.value,r=e.target.password.value;O.login(s,r).then((function(e){if(e.message){var s={message:e.message,type:"error"};n(s)}else n({}),t(e),c.push("/")})).catch(console.error)},children:[Object(y.jsx)("label",{htmlFor:"username",children:Object(y.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435",required:!0})}),Object(y.jsx)("label",{htmlFor:"password",children:Object(y.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u0430",name:"password",id:"password",required:!0})}),Object(y.jsx)("button",{className:"login-form-btn",children:"\u0412\u043b\u0435\u0437"}),Object(y.jsx)(v.b,{to:"/register",className:"login-form-to-register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})]})});var q=function(e){var t=e.menu,c=e.user,s=e.setUser,n=e.match,r=e.history,i=e.setNotification,a=function(e){p.addToCart(c,e).then((function(e){s(e)})).catch(console.error)};return Object(y.jsxs)("section",{className:"menu",children:[Object(y.jsxs)("article",{className:"food-list",children:[Object(y.jsxs)("article",{className:"salads",children:[Object(y.jsx)("h2",{className:"food-list-title",children:"\u0421\u0430\u043b\u0430\u0442\u0438"}),Object(y.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"salad"===e.category})).map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(y.jsxs)("article",{className:"soups",children:[Object(y.jsx)("h2",{className:"food-list-title",children:"\u0421\u0443\u043f\u0438"}),Object(y.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"soup"===e.category})).map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(y.jsxs)("article",{className:"main-dishes",children:[Object(y.jsx)("h2",{className:"food-list-title",children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0438 \u044f\u0441\u0442\u0438\u044f"}),Object(y.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"main"===e.category})).map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(y.jsxs)("article",{className:"deserts",children:[Object(y.jsx)("h2",{className:"food-list-title",children:"\u0414\u0435\u0441\u0435\u0440\u0442\u0438"}),Object(y.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"desert"===e.category})).map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]}),Object(y.jsxs)("article",{className:"drinks",children:[Object(y.jsx)("h2",{className:"food-list-title",children:"\u041d\u0430\u043f\u0438\u0442\u043a\u0438"}),Object(y.jsx)("ul",{children:null===t||void 0===t?void 0:t.filter((function(e){return"drink"===e.category})).map((function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{dish:e,addToCart:a,isLogged:!!c})},e._id)}))})]})]}),c?Object(y.jsx)(S,{user:c,setUser:s,match:n}):Object(y.jsx)(_,{setUser:s,history:r,setNotification:i})]})},T=(c(57),function(e){var t=e.history,c=e.setNotification;Object(s.useEffect)((function(){return function(){return c({})}}),[]);return Object(y.jsxs)("section",{className:"register",children:[Object(y.jsx)(N.g,{className:"register-icon"}),Object(y.jsx)("article",{className:"register-form",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={username:e.target.username.value,phone:e.target.phone.value,email:e.target.email.value,password:e.target.password.value,repeatPassword:e.target.repeatPassword.value};O.register(s).then((function(e){if("Successful registration"!==e.message){var s={message:e.message,type:"error"};c(s)}else{c({message:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f!",type:"success"}),t.push("/login")}})).catch(console.error)},children:[Object(y.jsx)("label",{htmlFor:"username",children:Object(y.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435",required:!0})}),Object(y.jsx)("label",{htmlFor:"phone",children:Object(y.jsx)("input",{type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",id:"phone",required:!0})}),Object(y.jsx)("label",{htmlFor:"email",children:Object(y.jsx)("input",{type:"email",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0449\u0430",name:"email",id:"email",required:!0})}),Object(y.jsx)("label",{htmlFor:"password",children:Object(y.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u0430",name:"password",id:"password",required:!0})}),Object(y.jsx)("label",{htmlFor:"repeatPassword",children:Object(y.jsx)("input",{type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430",name:"repeatPassword",id:"repeatPassword",required:!0})}),Object(y.jsx)("button",{className:"register-form-btn",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u043c\u0435"})]})})]})}),E=function(e){var t=e.history,c=e.setUser;return O.logout().then((function(){c(void 0),t.push("/")})).catch(console.error),null},A=c(6),I=(c(58),c(59),c(60),b.regions),H=b.mapBgRegions;var L=function(e){var t=e.user,c=e.setUser,s=e.toggleNewAddressForm;return Object(y.jsxs)("article",{className:"add-new-address",children:[Object(y.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"}),Object(y.jsxs)("form",{className:"add-new-address-form",onSubmit:function(e){var n,r,i;e.preventDefault();var a=null===(n=e.target.region)||void 0===n?void 0:n.value,o=null===(r=e.target.location)||void 0===r?void 0:r.value,l=null===t||void 0===t||null===(i=t.address)||void 0===i?void 0:i.find((function(e){return e.location===o}));if(a&&o&&!l){var d=I[a],j={region:a,location:o,delivery:d};O.editUserData({addAddress:j}).then((function(e){return c(e)})).then((function(){return s()})).catch(console.error)}},children:[Object(y.jsx)("label",{htmlFor:"region",children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(y.jsx)("select",{name:"region",id:"region",children:Object.keys(I).map((function(e){return Object(y.jsx)("option",{value:e,children:H[e]},e)}))}),Object(y.jsx)("label",{htmlFor:"add-new-address",children:"\u0410\u0434\u0440\u0435\u0441"}),Object(y.jsx)("input",{type:"text",name:"location",id:"add-new-address"}),Object(y.jsxs)("article",{className:"add-new-address-form-ctrl",children:[Object(y.jsx)("button",{type:"button",className:"close-new-address-btn",onClick:s,children:"\u0417\u0430\u0442\u0432\u043e\u0440\u0438"}),Object(y.jsx)("input",{type:"submit",className:"confirm-new-address-btn",value:"\u0414\u043e\u0431\u0430\u0432\u0438"})]})]})]})},B=b.mapBgRegions,R=function(e){var t=e.user,c=(e.order,e.setOrder),n=e.setUser,r=Object(s.useState)(!1),i=Object(A.a)(r,2),o=i[0],l=i[1],d=function(){l((function(e){return!e}))};Object(s.useEffect)((function(){(null===t||void 0===t?void 0:t.address.length)>0&&c((function(e){return Object(a.a)(Object(a.a)({},e),{},{address:t.address[0]})}))}),[t]);return Object(y.jsxs)("article",{className:"order-address",children:[Object(y.jsx)("h3",{children:"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"}),o?Object(y.jsx)(L,{user:t,setUser:n,toggleNewAddressForm:d}):Object(y.jsxs)("article",{className:"my-address",children:[Object(y.jsxs)("form",{className:"my-address-form",onChange:function(e){var s,n=e.target.value,r=null===t||void 0===t||null===(s=t.address)||void 0===s?void 0:s.find((function(e){return e.location===n}));if(r){var i=r.region,o=r.location,l=r.delivery;c((function(e){return Object(a.a)(Object(a.a)({},e),{},{address:{region:i,location:o,delivery:l}})}))}},children:[Object(y.jsx)("p",{children:"\u041c\u043e\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441\u0438:"}),Object(y.jsx)("select",{name:"address",id:"address",children:null===t||void 0===t?void 0:t.address.map((function(e){return Object(y.jsxs)("option",{value:e.location,children:[e.location,", ",B[e.region]]},e.location)}))})]}),Object(y.jsx)("button",{className:"add-new-address-btn",onClick:d,children:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"})]})]})},J=(c(61),function(e){var t=e.setOrder,c=function(e){var c=e.target.value;t((function(e){return Object(a.a)(Object(a.a)({},e),{},{payment:c})}))};return Object(y.jsxs)("article",{className:"order-payment",children:[Object(y.jsx)("h3",{children:"\u041d\u0430\u0447\u0438\u043d \u043d\u0430 \u043f\u043b\u0430\u0449\u0430\u043d\u0435"}),Object(y.jsxs)("form",{className:"payment-select",children:[Object(y.jsx)("label",{htmlFor:"cash",children:"\u041a\u0435\u0448"}),Object(y.jsx)("input",{type:"radio",id:"cash",name:"payment",value:"cash",onChange:c}),Object(y.jsx)("label",{htmlFor:"cash",children:"\u0421 \u043a\u0430\u0440\u0442\u0430"}),Object(y.jsx)("input",{type:"radio",id:"card",name:"payment",value:"card",onChange:c})]})]})}),M=(c(62),function(e){e.order;var t=e.setOrder;return Object(y.jsxs)("article",{className:"order-description",children:[Object(y.jsx)("h5",{className:"order-description-title",children:"\u0411\u0435\u043b\u0435\u0436\u043a\u0430 \u043a\u044a\u043c \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430"}),Object(y.jsx)("textarea",{name:"description",id:"order-description",cols:"30",rows:"10",onBlur:function(e){var c=e.target.value;t((function(e){return Object(a.a)(Object(a.a)({},e),{},{description:c})}))}})]})});var V=function(e){var t,c,n,r,i,o,l=e.user,d=e.setUser,j=e.match,u=e.history,h=e.setNotification,m=Object(s.useState)({cart:null===l||void 0===l?void 0:l.cart}),x=Object(A.a)(m,2),f=x[0],p=x[1],v=Object(s.useState)(.5),g=Object(A.a)(v,2),N=g[0],k=g[1];return Object(s.useEffect)((function(){var e;if(Number(null===l||void 0===l||null===(e=l.cart)||void 0===e?void 0:e.totalPrice)>=10)k(.5);else{var t,c=Number(b.regions[null===f||void 0===f||null===(t=f.address)||void 0===t?void 0:t.region]);isNaN(c)||k(c)}}),[l,null===f||void 0===f?void 0:f.address]),Object(s.useEffect)((function(){p((function(e){return Object(a.a)(Object(a.a)({},e),{},{cart:null===l||void 0===l?void 0:l.cart})}))}),[null===l||void 0===l||null===(t=l.cart)||void 0===t?void 0:t.products]),Object(y.jsxs)("section",{className:"finish-order",children:[Object(y.jsx)("article",{className:"finish-order-details",children:(null===l||void 0===l||null===(c=l.cart)||void 0===c||null===(n=c.products)||void 0===n?void 0:n.length)>0?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(S,{user:l,setUser:d,match:j}),Object(y.jsx)(R,{user:l,setUser:d,order:f,setOrder:p}),Object(y.jsx)(J,{order:f,setOrder:p}),Object(y.jsx)(M,{order:f,setOrder:p})]}):Object(y.jsx)("p",{children:"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438 \u0432 \u043a\u043e\u043b\u0438\u0447\u043a\u0430\u0442\u0430..."})}),(null===l||void 0===l||null===(r=l.cart)||void 0===r||null===(i=r.products)||void 0===i?void 0:i.length)>0?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("article",{className:"finish-order-summary",children:void 0!==N?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("p",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",Object(y.jsx)("strong",{children:N.toFixed(2)||.5})," \u043b\u0432."]}),Object(y.jsxs)("p",{className:"finish-order-summary-total-process",children:["\u041a\u0440\u0430\u0439\u043d\u0430 \u0441\u0443\u043c\u0430: ",Object(y.jsxs)("strong",{children:[(Number(null===f||void 0===f||null===(o=f.cart)||void 0===o?void 0:o.totalPrice)+Number(N)).toFixed(2)," \u043b\u0432."]})]})]}):null}),Object(y.jsx)("button",{className:"finish-order-submit-btn",onClick:function(){var e,t,c,s,n={cart:null===f||void 0===f||null===(e=f.cart)||void 0===e?void 0:e.products,address:{region:null===f||void 0===f||null===(t=f.address)||void 0===t?void 0:t.region,location:null===f||void 0===f||null===(c=f.address)||void 0===c?void 0:c.location},delivery:N,totalPrice:(null===f||void 0===f||null===(s=f.cart)||void 0===s?void 0:s.totalPrice)+N,description:f.description||"",payment:null===f||void 0===f?void 0:f.payment,date:(new Date).toLocaleString()};if(n.cart&&n.address.location&&n.address.region&&n.delivery&&n.totalPrice&&n.payment)O.editUserData({order:n}).then((function(e){e.cart={},d(e);h({message:"\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u043c \u0432\u0438 \u0437\u0430 \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430!",type:"success"})})).then((function(){return u.push("/")})).catch(console.error);else{h({message:"\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438 \u043d\u0430\u0447\u0438\u043d \u043d\u0430 \u043f\u043b\u0430\u0449\u0430\u043d\u0435!",type:"error"})}},children:"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430"})]}):null]})},G=(c(63),c(17)),Q=c(24);var $=function(){return Object(y.jsx)("section",{className:"contacts",children:Object(y.jsxs)("article",{className:"contacts-content",children:[Object(y.jsxs)("article",{className:"contacts-phone",children:[Object(y.jsx)(G.c,{class:"contacts-icon"}),Object(y.jsx)("h2",{children:"+359 878 123 123"})]}),Object(y.jsxs)("article",{className:"contacts-email",children:[Object(y.jsx)(Q.b,{class:"contacts-icon"}),Object(y.jsx)("h2",{children:"delivery@fooddelivery.com"})]}),Object(y.jsxs)("article",{className:"contacts-address",children:[Object(y.jsx)(Q.a,{class:"contacts-icon"}),Object(y.jsx)("h2",{children:'\u0433\u0440.\u0421\u043c\u043e\u043b\u044f\u043d,\u0431\u0443\u043b."\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f" 5'})]})]})})},z=(c(64),"posts/"),K={getPosts:function(){return h(z,"GET").then((function(e){return e.json()})).catch(console.error)},createPost:function(e){return h("posts/create_post","POST",e).then((function(e){return e.json()})).catch(console.error)},editPost:function(e){return h("posts/edit_post","POST",e).then((function(e){return e.json()})).catch(console.error)}},W=(c(65),function(e){var t=e.item,c=e.likeHandler,n=e.user,r=Object(s.useState)(!1),i=Object(A.a)(r,2),a=i[0],o=i[1],l=Object(s.useState)(!1),d=Object(A.a)(l,2),j=d[0],u=d[1],b=function(e){n&&t.author._id!==n._id&&("like"===e&&(t.likes.includes(n._id)||c(t,e)),"dislike"===e&&(t.dislikes.includes(n._id)||c(t,e)))};return Object(s.useEffect)((function(){var e,c;(null===t||void 0===t||null===(e=t.likes)||void 0===e?void 0:e.includes(null===n||void 0===n?void 0:n._id))&&o(!0),(null===t||void 0===t||null===(c=t.dislikes)||void 0===c?void 0:c.includes(null===n||void 0===n?void 0:n._id))&&u(!0)}),[n]),Object(s.useEffect)((function(){var e,c;(null===t||void 0===t||null===(e=t.likes)||void 0===e?void 0:e.includes(null===n||void 0===n?void 0:n._id))&&(o(!0),u(!1)),(null===t||void 0===t||null===(c=t.dislikes)||void 0===c?void 0:c.includes(null===n||void 0===n?void 0:n._id))&&(u(!0),o(!1))}),[t.likes,t.dislikes]),Object(y.jsxs)("article",{className:"post-item",children:[Object(y.jsxs)("article",{className:"post-item-content",children:[Object(y.jsx)("h4",{className:"post-item-content-title",children:t.title}),Object(y.jsx)("p",{className:"post-item-content-description",children:t.description}),Object(y.jsxs)("article",{className:"post-item-details",children:[Object(y.jsx)("p",{children:t.author.username}),Object(y.jsx)("p",{children:t.created_at.split("T")[0]})]})]}),Object(y.jsxs)("article",{className:"post-item-likes",children:[Object(y.jsxs)("article",{className:"like-wrapper",children:[Object(y.jsx)("p",{className:"like-counter like",children:t.likes.length}),Object(y.jsx)(G.b,{className:a?"like isLiked":"like",onClick:b.bind(null,"like")})]}),Object(y.jsxs)("article",{className:"like-wrapper",children:[Object(y.jsx)("p",{className:"like-counter dislike",children:t.dislikes.length}),Object(y.jsx)(G.a,{className:j?"dislike isDisliked":"dislike",onClick:b.bind(null,"dislike")})]})]})]})}),X=function(e){var t=e.user,c=e.setNotification,n=Object(s.useState)([]),r=Object(A.a)(n,2),i=r[0],a=r[1];Object(s.useEffect)((function(){K.getPosts().then((function(e){a(e)})).catch(console.error)}),[]);var o=function(e,c){var s=function(e,c){e.push(t._id);var s=c.findIndex((function(e){return e===t._id}));c.includes(null===t||void 0===t?void 0:t._id)&&c.splice(s,1)};"like"===c?s(e.likes,e.dislikes):s(e.dislikes,e.likes),K.editPost(e).then((function(c){var s=i.findIndex((function(e){return e.author._id===t._id}));i[s]=e,a(c)})).catch(console.error)};return Object(y.jsxs)("section",{className:"posts",children:[Object(y.jsx)("article",{className:"post-list",children:0===i.length?Object(y.jsx)("p",{children:"\u041d\u044f\u043c\u0430 \u043f\u0440\u0435\u0434\u0438\u0448\u043d\u0438 \u043c\u043d\u0435\u043d\u0438\u044f..."}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w.a,{className:"post-list-logo"}),null===i||void 0===i?void 0:i.sort((function(e,t){return Date.parse(t.created_at)-Date.parse(e.created_at)})).map((function(e){return Object(y.jsx)(W,{item:e,likeHandler:o,user:t},e.description+e.title+e.author.username)})),t?null:Object(y.jsx)("p",{className:"post-list-title-info",children:"* \u0421\u0430\u043c\u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u043d\u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438 \u043e\u0446\u0435\u043d\u044f\u0432\u0430\u0442 \u043c\u043d\u0435\u043d\u0438\u044f."})]})}),t?Object(y.jsxs)("article",{className:"post-create",children:[Object(y.jsx)("h4",{children:"\u0421\u043f\u043e\u0434\u0435\u043b\u0438 \u043c\u043d\u0435\u043d\u0438\u0435"}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:e.target.title.value,description:e.target.description.value};K.createPost(t).then((function(t){var s={message:t.message,type:"error"};t.message?c(s):(s.message="\u0412\u0430\u0448\u0435\u0442\u043e \u043c\u043d\u0435\u043d\u0438\u0435 \u0431\u0435\u0448\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u043e!",s.type="success",c(s),a(t),e.target.title.value="",e.target.description.value="")})).catch(console.error)},className:"new-post-form",children:[Object(y.jsx)("input",{type:"text",required:!0,placeholder:"\u0417\u0430\u0433\u043b\u0430\u0432\u0438\u0435",name:"title"}),Object(y.jsx)("textarea",{name:"description",required:!0,placeholder:"\u0412\u0430\u0448\u0435\u0442\u043e \u043c\u043d\u0435\u043d\u0438\u0435...",cols:"30",rows:"10"}),Object(y.jsx)("button",{className:"post-create-btn",children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u0439"})]})]}):null]})},Y=(c(66),function(){return Object(y.jsxs)("section",{className:"about",children:[Object(y.jsx)(F.e,{className:"about-logo"}),Object(y.jsxs)("article",{className:"about-content",children:[Object(y.jsx)("q",{className:"about-content-text",children:"\u0417\u0430 \u043d\u0430\u0441 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e\u0442\u043e \u043d\u0430 \u0445\u0440\u0430\u043d\u0430\u0442\u0430 \u0435 \u043e\u0441\u043d\u043e\u0432\u0435\u043d \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442. \u041d\u0430\u0448\u0430\u0442\u0430 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0435 \u0434\u0430 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043c\u0435 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0438\u0442\u0435 \u0441\u0438 \u0442\u043e\u0432\u0430, \u043a\u043e\u0435\u0442\u043e \u0441\u0430\u043c\u0438\u0442\u0435 \u043d\u0438\u0435 \u0441\u043b\u0430\u0433\u0430\u043c\u0435 \u043d\u0430 \u043d\u0430\u0448\u0430\u0442\u0430 \u043c\u0430\u0441\u0430. \u0412\u0435\u0447\u0435 \u0441 \u043d\u0430\u0442\u0440\u0443\u043f\u0430\u043d \u0431\u043e\u0433\u0430\u0442 \u043e\u043f\u0438\u0442 \u0432 \u0433\u043e\u0442\u0432\u0435\u043d\u0435\u0442\u043e \u0438 \u043a\u0443\u043b\u0438\u043d\u0430\u0440\u0438\u044f\u0442\u0430, \u0441\u044a\u0437\u0434\u0430\u0434\u043e\u0445\u043c\u0435 \u043d\u0430\u0448\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041d\u0438\u0435 \u0432\u044f\u0440\u0432\u0430\u043c\u0435, \u0447\u0435 \u0437\u0430\u0431\u044a\u0440\u0437\u0430\u043d\u043e\u0442\u043e \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u0438\u0435 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0431\u044a\u0434\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0430 \u0437\u0430 \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441 \u0441 \u0438\u0437\u0431\u043e\u0440\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0430. \u0412\u0441\u0435\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0435\u043d \u0434\u0435\u043d \u0412\u0438 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043c\u0435 \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u043e \u043e\u0431\u0435\u0434\u043d\u043e \u043c\u0435\u043d\u044e \u0438 \u043e\u0447\u0430\u043a\u0432\u0430\u043c\u0435 \u0412\u0430\u0448\u0438\u044f \u0438\u0437\u0431\u043e\u0440!"}),Object(y.jsxs)("article",{className:"about-footer",children:[Object(y.jsx)("p",{className:"about-footer-content",children:'"\u0424\u0443\u0443\u0434 \u0414\u0435\u043b\u0438\u0432\u044a\u0440\u0438" \u0415\u041e\u041e\u0414 \u0415\u0418\u041a:1234412342 \u0441\u044a\u0441 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435: \u0433\u0440.\u0421\u043c\u043e\u043b\u044f\u043d,\u0431\u0443\u043b."\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f" 5 \u041c\u041e\u041b.:\u0421\u0442\u0435\u0444\u0430\u043d \u0421\u0442\u0430\u043d\u0447\u0435\u0432'}),Object(y.jsx)("img",{src:"foodDelivery-icon.png",alt:"company logo"})]})]})]})}),Z=(c(67),c(31)),ee=function(){return Object(y.jsxs)("section",{className:"conditions",children:[Object(y.jsx)(Z.a,{className:"conditions-icon"}),Object(y.jsx)("h2",{className:"condition-item-title",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(y.jsx)("article",{className:"conditions-item",children:Object(y.jsxs)("p",{children:["\u0412\u0441\u0435\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0435\u043d \u0434\u0435\u043d \u0412\u0438\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043f\u043e\u0440\u044a\u0447\u0430\u0442\u0435 \u0445\u0440\u0430\u043d\u0430 \u0437\u0430 \u0432\u043a\u044a\u0449\u0438 \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u043d\u043e\u0442\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u043d\u0430\u0448\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041e\u0441\u0432\u0435\u043d \u0447\u0440\u0435\u0437 \u043e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043da, \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043f\u043e\u0440\u044a\u0447\u0430\u0442\u0435 \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e \u043e\u0431\u0430\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 ",Object(y.jsx)("strong",{children:"0876 123 123"})," \u0438\u043b\u0438 \u0447\u0440\u0435\u0437 e-mail:",Object(y.jsx)("strong",{children:" delivery@fooddelivery.com"})]})}),Object(y.jsx)("h2",{className:"condition-item-title",children:"\u0426\u0435\u043d\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(y.jsx)("article",{className:"conditions-item",children:Object(y.jsxs)("p",{children:["\u0426\u0435\u043d\u0430\u0442\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430\u0442\u0430 \u0435 ",Object(y.jsx)("strong",{children:"0.50\u043b\u0432"}),". \u041f\u043e\u0440\u044a\u0447\u043a\u0438 \u0437\u0430 \u043a\u0432\u0430\u0440\u0430\u043b\u0438\u0442\u0435 \u041a\u0430\u043f\u0442\u0430\u0436\u0430, \u0420\u0430\u0439\u043a\u043e\u0432\u043e \u0438 \u0423\u0441\u0442\u043e\u0432\u043e, \u043a\u043e\u0438\u0442\u043e \u0441\u0430 \u043d\u0430 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043f\u043e\u0434 ",Object(y.jsx)("strong",{children:"10\u043b\u0432"}),"., \u0449\u0435 \u0441\u0435 \u0442\u0430\u043a\u0441\u0443\u0432\u0430\u0442 \u0441 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 - ",Object(y.jsx)("strong",{children:"1.50\u043b\u0432"}),"."]})}),Object(y.jsx)("h2",{className:"condition-item-title",children:"\u0420\u0430\u0431\u043e\u0442\u043d\u043e \u0432\u0440\u0435\u043c\u0435"}),Object(y.jsx)("article",{className:"conditions-item",children:Object(y.jsxs)("p",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0438\u0442\u0435 \u043d\u0430 \u0445\u0440\u0430\u043d\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u043e\u0442 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a \u0434\u043e \u043f\u0435\u0442\u044a\u043a \u0434\u043e ",Object(y.jsx)("strong",{children:"13:00"})," \u0447\u0430\u0441\u0430. \u041f\u0440\u0438\u0435\u043c\u0430\u043c\u0435 \u043f\u043e\u0440\u044a\u0447\u043a\u0438 \u0434\u043e ",Object(y.jsx)("strong",{children:"12:30\u0447"}),"\u0430\u0441\u0430! \u041f\u043e\u0447\u0438\u0432\u043d\u0438 \u0434\u043d\u0438 - ",Object(y.jsx)("strong",{children:"\u0441\u044a\u0431\u043e\u0442\u0430 \u0438 \u043d\u0435\u0434\u0435\u043b\u044f"}),", \u043a\u0430\u043a\u0442\u043e \u0438 ",Object(y.jsx)("strong",{children:"\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438"}),"."]})})]})},te=c(5),ce=(c(68),c(19)),se=function(e){var t=e.notification,c=e.setNotification;return"error"!==(null===t||void 0===t?void 0:t.type)&&setTimeout((function(){c({})}),2500),Object(y.jsx)("article",{className:"notification "+(null===t||void 0===t?void 0:t.type),children:"error"===(null===t||void 0===t?void 0:t.type)?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ce.c,{className:"notification-icon"}),Object(y.jsx)("article",{className:"notification-content",children:Object(y.jsx)("p",{children:null===t||void 0===t?void 0:t.message})}),Object(y.jsx)(ce.a,{className:"notification-close",onClick:function(){c({})}})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ce.b,{className:"notification-icon"}),Object(y.jsx)("article",{className:"notification-content",children:Object(y.jsx)("p",{children:null===t||void 0===t?void 0:t.message})})]})})},ne=(c(69),c(25)),re=c.n(ne),ie=c(32),ae=(c(71),function(e){var t=e.user,c=e.setUser,n=e.setNotification,r=e.history;Object(s.useEffect)((function(){return function(){return n({})}}),[]);var i=Object(s.useState)(!1),a=Object(A.a)(i,2),o=a[0],l=a[1],d=function(){l((function(e){return!e}))},j=function(e,c,s){var r=Object(A.a)(Object.entries(e)[0],2),i=r[0];if(r[1].length<c){var a={message:'\u0422\u0432\u044a\u0440\u0434\u0435 \u043c\u0430\u043b\u043a\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0437\u0430 "'.concat(i,'". \u0422\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u043c\u0438\u043d\u0438\u043c\u0443\u043c ').concat(c," \u0441\u0438\u043c\u0432\u043e\u043b\u0430."),type:"error"};return s.target[i].value=t[i],n(a),Promise.reject("not enough symbols")}return Promise.resolve()},u=function(){var e=Object(ie.a)(re.a.mark((function e(s){var i,a,o,l,u;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i=s.target.username.value,a=s.target.email.value,o=s.target.phone.value,l={},u=!1,i===t.username){e.next=11;break}return e.next=9,j({username:i},3,s).then((function(){l.username=i})).catch((function(){return u=!0}));case 9:if(!u){e.next=11;break}return e.abrupt("return");case 11:if(o===t.phone){e.next=16;break}return e.next=14,j({phone:o},5,s).then((function(){return l.phone=o})).catch((function(){return u=!0}));case 14:if(!u){e.next=16;break}return e.abrupt("return");case 16:if(a===t.email){e.next=26;break}return e.next=19,j({email:a},6,s).then((function(){return l.email=a})).catch((function(){return u=!0}));case 19:if(!u){e.next=21;break}return e.abrupt("return");case 21:if(a.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/g)){e.next=26;break}return n({message:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0435\u043c\u0430\u0439\u043b \u0430\u0434\u0440\u0435\u0441",type:"error"}),s.target.email.value=t.email,d(),e.abrupt("return");case 26:if(0!==Object.keys(l).length){e.next=28;break}return e.abrupt("return",d());case 28:O.editUserData(l).then((function(e){if(e.message){var r=e.message.split("dup key: ");if(r.length>0){var i=JSON.parse(JSON.stringify(r[1].split(" "))),a=Object.values(i)[1].split(":")[0].trim();return s.target[a].value=t[a],n({message:"\u0418\u043c\u0435\u0442\u043e \u0432\u0435\u0447\u0435 \u0435 \u0437\u0430\u0435\u0442\u043e - ".concat(a),type:"error"}),void d()}var o={message:e.message,type:"error"};return n(o),d()}n({message:"\u041f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0430 \u0437\u0430\u043f\u0430\u043c\u0435\u0442\u0435\u043d\u0438.",type:"success"}),c(e),d()})).catch(r.push("/profile"));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("article",{className:"profile-info",children:Object(y.jsxs)("form",{className:"profile-info-form",onSubmit:u,children:[Object(y.jsx)("label",{htmlFor:"username",children:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435"}),Object(y.jsx)("input",{type:"text",defaultValue:null===t||void 0===t?void 0:t.username,name:"username",disabled:!o,className:o?"editing":""}),Object(y.jsx)("label",{htmlFor:"email",children:"\u0415-\u043c\u0430\u0439\u043b"}),Object(y.jsx)("input",{type:"email",defaultValue:null===t||void 0===t?void 0:t.email,name:"email",disabled:!o,className:o?"editing":""}),Object(y.jsx)("label",{htmlFor:"phone",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(y.jsx)("input",{type:"phone",defaultValue:null===t||void 0===t?void 0:t.phone,name:"phone",disabled:!o,className:o?"editing":""}),Object(y.jsxs)("article",{className:"profile-info-form-btn-wrapper",children:[Object(y.jsx)("button",{className:o?"profile-form-btn back":"profile-form-btn edit",type:"button",onClick:d,children:o?"\u041d\u0430\u0437\u0430\u0434":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439"}),o?Object(y.jsx)("button",{type:"submit",className:"profile-form-btn",children:"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438"}):null]})]})})}),oe=(c(72),c(73),b.mapBgRegions),le=function(e){var t=e.address,c=e.index,n=e.onDeleteAddressHandler,r=e.onUpdateExistAddressHandler,i=e.setNotification,a=Object(s.useState)(!1),o=Object(A.a)(a,2),l=o[0],d=o[1],j=Object(s.useState)(t.location),u=Object(A.a)(j,2),b=u[0],h=u[1],O=function(e){e||h(t.location),d((function(e){return!e}))};return Object(y.jsxs)("article",{className:"profile-address-item",children:[Object(y.jsxs)("article",{className:"profile-address-item-wrapper region",children:[Object(y.jsx)("label",{htmlFor:"add-address-region",children:"\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(y.jsx)("input",{type:"text",id:"add-address-region",name:"region",defaultValue:oe[t.region],disabled:!0})]}),Object(y.jsxs)("article",{className:"profile-address-item-wrapper location",children:[Object(y.jsx)("label",{htmlFor:"add-address-location",children:"\u0422\u043e\u0447\u0435\u043d \u0430\u0434\u0440\u0435\u0441"}),Object(y.jsx)("input",{type:"text",id:"add-address-location",name:"location",value:b,disabled:!l,onChange:function(e){h((function(t){return e.target.value}))},className:l?"editing-location":""})]}),Object(y.jsx)("article",{className:"profile-address-item-wrapper buttons",children:l?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N.a,{className:"confirm",onClick:function(){if(b===t.location)return O();if(b.length<10)return i({message:"\u0422\u0432\u044a\u0440\u0434\u0435 \u043a\u0440\u0430\u0442\u044a\u043a \u0430\u0434\u0440\u0435\u0441! \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0438 \u0441\u0430 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0430.",type:"error"}),void O(!1);var e={region:t.region,location:b,delivery:t.delivery};r(t,e,c)}}),Object(y.jsx)(F.d,{onClick:O.bind(null,!1)})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N.b,{onClick:O}),Object(y.jsx)(N.f,{onClick:function(){return n(t,Number(c))}})]})})]})},de=function(e){var t=e.user,c=e.setUser,n=e.setNotification,r=e.onDeleteAddressHandler,i=e.onUpdateExistAddressHandler,a=Object(s.useState)(!1),o=Object(A.a)(a,2),l=o[0],d=o[1],j=function(){d((function(e){return!e}))};return Object(y.jsxs)("section",{className:"profile-address",children:[null===t||void 0===t?void 0:t.address.map((function(e,t){return Object(y.jsx)(le,{address:e,index:t,onDeleteAddressHandler:r,onUpdateExistAddressHandler:i,setNotification:n},(null===e||void 0===e?void 0:e.location)+(null===e||void 0===e?void 0:e.region))})),0===(null===t||void 0===t?void 0:t.address.length)?Object(y.jsx)("p",{children:"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u0430\u0434\u0440\u0435\u0441\u0438..."}):null,l?Object(y.jsx)(L,{user:t,setUser:c,toggleNewAddressForm:j}):Object(y.jsx)("button",{className:"add-new-address-btn",onClick:j,children:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043d\u043e\u0432 \u0430\u0434\u0440\u0435\u0441"})]})};c(74),c(75);var je=function(e){var t,c=e.order,s=e.closeHandler;return Object(y.jsxs)("article",{className:"show-order-cart",children:[Object(y.jsxs)("article",{className:"show-order-cart-icons",children:[Object(y.jsx)(N.e,{className:"profile-order-cart-icon"}),Object(y.jsx)(F.d,{className:"close-order-cart",onClick:s})]}),Object(y.jsxs)("table",{className:"order-cart-table",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442"}),Object(y.jsx)("th",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(y.jsx)("th",{children:"\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u0430 \u0446\u0435\u043d\u0430"})]})}),Object(y.jsxs)("tbody",{children:[null===c||void 0===c||null===(t=c.cart)||void 0===t?void 0:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.name}),Object(y.jsx)("td",{children:e.quantity}),Object(y.jsxs)("td",{children:[Number(e.price).toFixed(2)," \u043b\u0432."]})]},t)})),Object(y.jsxs)("tr",{className:"tr-summary",children:[Object(y.jsx)("th",{children:"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"}),Object(y.jsx)("th",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(y.jsx)("th",{children:"\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430"})]}),Object(y.jsxs)("tr",{className:"tr-summary-content",children:[Object(y.jsx)("td",{className:"tr-summary-content-item",children:function(e){var t=0;return e.forEach((function(e){t+=e.price*e.quantity})),t.toFixed(2)+" \u043b\u0432."}(c.cart)}),Object(y.jsxs)("td",{className:"tr-summary-content-item",children:[Number(c.delivery).toFixed(2)," \u043b\u0432."]}),Object(y.jsxs)("td",{className:"tr-summary-content-item",children:[Number(c.totalPrice).toFixed(2)," \u043b\u0432."]})]})]})]}),c.description?Object(y.jsxs)("article",{className:"show-order-cart-description",children:[Object(y.jsx)("p",{className:"description-title",children:"\u0411\u0435\u043b\u0435\u0436\u043a\u0430 \u043a\u044a\u043c \u043f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430:"}),Object(y.jsx)("q",{children:c.description})]}):null]})};var ue=function(e){var t=e.user,c=Object(s.useState)(!1),n=Object(A.a)(c,2),r=n[0],i=n[1],a=Object(s.useState)(void 0),o=Object(A.a)(a,2),l=o[0],d=o[1],j=function(e){if(!e)return i((function(e){return!e})),void d((function(e){}));i((function(e){return!e})),d((function(t){return e}))};return Object(y.jsxs)("article",{className:"profile-orders",children:[0===(null===t||void 0===t?void 0:t.orders.length)?Object(y.jsx)("p",{children:"\u0412\u0441\u0435 \u043e\u0449\u0435 \u043d\u044f\u043c\u0430\u0442\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u0435\u043d\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0438..."}):Object(y.jsxs)("table",{className:"order-table",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(y.jsx)("th",{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(y.jsx)("th",{children:"\u041f\u043b\u0430\u0449\u0430\u043d\u0435"}),Object(y.jsx)("th",{children:"\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430"}),Object(y.jsx)("th",{children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"})]})}),Object(y.jsx)("tbody",{children:null===t||void 0===t?void 0:t.orders.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})).map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.date}),Object(y.jsx)("td",{children:e.address.location}),Object(y.jsx)("td",{children:e.payment}),Object(y.jsxs)("td",{children:[Number(e.totalPrice).toFixed(2)," \u043b\u0432."]}),Object(y.jsx)("td",{children:Object(y.jsx)(F.f,{className:"magnifier",onClick:j.bind(null,e),disabled:r})})]},e._id)}))})]}),r?Object(y.jsx)(je,{order:l,closeHandler:j}):null]})},be=function(e){var t=e.user,c=e.setUser,s=e.match,n=e.setNotification,r=function(e,s){t.address.splice(s,1),O.editUserData({deleteAddress:e}),c(t)},i=function(e,s,n){t.address.splice(n,1,s),O.editUserData({deleteAddress:e}),O.editUserData({addAddress:s}),c(t)};return Object(y.jsx)("section",{className:"profile",children:t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("section",{className:"profile-header",children:Object(y.jsxs)("nav",{className:"profile-header-nav",children:[Object(y.jsx)(v.c,{to:s.url,exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u0438"}),Object(y.jsx)(v.c,{to:s.url+"/address",exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441\u0438"}),Object(y.jsx)(v.c,{to:s.url+"/orders",exact:!0,activeClassName:"is-active",children:"\u041c\u043e\u0438\u0442\u0435 \u043f\u043e\u0440\u044a\u0447\u043a\u0438"})]})}),Object(y.jsxs)("section",{className:"profile-content",children:[Object(y.jsx)("article",{className:"profile-icon-wrapper",children:Object(y.jsx)(g.b,{className:"profile-icon"})}),Object(y.jsxs)(te.c,{children:[Object(y.jsx)(te.a,{path:"/profile",exact:!0,render:function(e){return Object(y.jsx)(ae,Object(a.a)(Object(a.a)({},e),{},{user:t,setUser:c,setNotification:n}))}}),Object(y.jsx)(te.a,{path:"/profile/address",exact:!0,render:function(e){return Object(y.jsx)(de,Object(a.a)(Object(a.a)({},e),{},{user:t,setUser:c,setNotification:n,onDeleteAddressHandler:r,onUpdateExistAddressHandler:i}))}}),Object(y.jsx)(te.a,{path:"/profile/orders",exact:!0,render:function(e){return Object(y.jsx)(ue,Object(a.a)(Object(a.a)({},e),{},{user:t}))}})]})]})]}):null})},he=function(e){Object(j.a)(c,e);var t=Object(u.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).state={menu:[],currentUser:void 0,notification:{message:"",type:""}},s.setUser=s.setUser.bind(Object(d.a)(s)),s.getUserInfo=s.getUserInfo.bind(Object(d.a)(s)),s.setNotification=s.setNotification.bind(Object(d.a)(s)),s}return Object(l.a)(c,[{key:"componentDidMount",value:function(){var e=this;p.getDailyMenu().then((function(t){e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{menu:t})}))})).catch((function(e){return console.error(e)})),O.getUserInfo().then((function(t){t&&e.setState((function(e){return{currentUser:t.message?void 0:t}}))})).catch((function(e){return console.error(e)}))}},{key:"setUser",value:function(e){return this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentUser:e})}))}},{key:"setNotification",value:function(e){return this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{notification:e})}))}},{key:"getUserInfo",value:function(){var e=this;O.getUserInfo().then((function(t){console.log(t),e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentUser:t})}))})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(k,{user:this.state.currentUser}),this.state.notification.message?Object(y.jsx)(se,{notification:this.state.notification,setNotification:this.setNotification}):null,Object(y.jsx)("main",{className:"app-main",children:Object(y.jsxs)(te.c,{children:[Object(y.jsx)(te.a,{path:"/",exact:!0,render:function(t){return Object(y.jsx)(q,Object(a.a)(Object(a.a)({},t),{},{menu:e.state.menu,user:e.state.currentUser,setUser:e.setUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/register",exact:!0,render:function(t){return Object(y.jsx)(T,Object(a.a)(Object(a.a)({},t),{},{setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/login",exact:!0,render:function(t){return Object(y.jsx)(_,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/profile",render:function(t){return Object(y.jsx)(be,Object(a.a)(Object(a.a)({},t),{},{user:e.state.currentUser,setUser:e.setUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/logout",exact:!0,render:function(t){return Object(y.jsx)(E,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser}))}}),Object(y.jsx)(te.a,{path:"/cart",exact:!0,render:function(t){return Object(y.jsx)(S,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/order",exact:!0,render:function(t){return Object(y.jsx)(V,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/posts",exact:!0,render:function(t){return Object(y.jsx)(X,Object(a.a)(Object(a.a)({},t),{},{setUser:e.setUser,user:e.state.currentUser,setNotification:e.setNotification}))}}),Object(y.jsx)(te.a,{path:"/contacts",exact:!0,component:$}),Object(y.jsx)(te.a,{path:"/about",exact:!0,component:Y}),Object(y.jsx)(te.a,{path:"/conditions",exact:!0,component:ee})]})}),Object(y.jsx)(U,{})]})}}]),c}(s.Component),Oe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,77)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),s(e),n(e),r(e),i(e)}))};i.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(v.a,{children:Object(y.jsx)(he,{})})}),document.getElementById("root")),Oe()}]),[[76,1,2]]]);
//# sourceMappingURL=main.791dd9df.chunk.js.map